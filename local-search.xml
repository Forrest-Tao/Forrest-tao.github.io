<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>【读Go专家编程】之Channel篇</title>
    <link href="/2023/10/13/%E3%80%90%E8%AF%BBGo%E4%B8%93%E5%AE%B6%E7%BC%96%E7%A8%8B%E3%80%91%E4%B9%8BChannel%E7%AF%87/"/>
    <url>/2023/10/13/%E3%80%90%E8%AF%BBGo%E4%B8%93%E5%AE%B6%E7%BC%96%E7%A8%8B%E3%80%91%E4%B9%8BChannel%E7%AF%87/</url>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><ul><li>channel是Golang在语言层面提供的goroutine间的通信方式，比Unix管道更易用也更轻便。</li><li>channel主要用于进程内各goroutine间通信，如果需要跨进程通信，建议使用分布式系统的方法来解决。</li></ul><h3 id="Chan-数据结构"><a href="#Chan-数据结构" class="headerlink" title="Chan 数据结构"></a>Chan 数据结构</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> hchan <span class="hljs-keyword">struct</span> &#123;<br>    qcount   <span class="hljs-type">uint</span>           <span class="hljs-comment">// 当前队列中剩余元素个数</span><br>    dataqsiz <span class="hljs-type">uint</span>           <span class="hljs-comment">// 环形队列长度，即可以存放的元素个数</span><br>    buf      unsafe.Pointer <span class="hljs-comment">// 环形队列指针</span><br>    elemsize <span class="hljs-type">uint16</span>         <span class="hljs-comment">// 每个元素的大小</span><br>    closed   <span class="hljs-type">uint32</span>            <span class="hljs-comment">// 标识关闭状态</span><br>    elemtype *_type         <span class="hljs-comment">// 元素类型</span><br>    sendx    <span class="hljs-type">uint</span>           <span class="hljs-comment">// 队列下标，指示元素写入时存放到队列中的位置</span><br>    recvx    <span class="hljs-type">uint</span>           <span class="hljs-comment">// 队列下标，指示元素从队列的该位置读出</span><br>    recvq    waitq          <span class="hljs-comment">// 等待读消息的goroutine队列</span><br>    sendq    waitq          <span class="hljs-comment">// 等待写消息的goroutine队列</span><br>    lock mutex              <span class="hljs-comment">// 互斥锁，chan不允许并发读写</span><br>&#125;<br></code></pre></td></tr></table></figure><p>可以看出，Chan由 队列、信息类型、goroutine等灯盖队列组成</p><h4 id="环形队列"><a href="#环形队列" class="headerlink" title="环形队列"></a>环形队列</h4><p>chan内部实现了一个环形队列作为其缓冲区，队列的长度是创建Chan时指定的。</p><h4 id="等待队列"><a href="#等待队列" class="headerlink" title="等待队列"></a>等待队列</h4><ul><li>从Channel中读取数据时，如果缓冲区为空，此时的G被阻塞</li><li>从Channel中写数据时，如果缓冲区满了，此时的G被阻塞</li></ul><p>被阻塞的G会挂在Channel的等待队列中</p><ul><li>因为读阻塞的G会被向Channel写的G唤醒</li><li>因为写阻塞的G会被向Channel读的G唤醒</li></ul><h4 id="信息类型"><a href="#信息类型" class="headerlink" title="信息类型"></a>信息类型</h4><p>一个Channel只能传递一种类型的值，类型信息存储在hchan的数据结构中</p><ul><li>elemtype代表类型，用于数据传递过程中的赋值；</li><li>elemsize代表类型大小，用于在buf中定位元素位置。</li></ul><h4 id="Mutex"><a href="#Mutex" class="headerlink" title="Mutex"></a>Mutex</h4><ul><li>一个channel仅同时允许被一个goroutine读写</li></ul><h3 id="从Channel中写数据"><a href="#从Channel中写数据" class="headerlink" title="从Channel中写数据"></a>从Channel中写数据</h3><ul><li>如果等待接受队列recvq不为空，说明缓冲区没有数据或者没有缓冲区，此时直接将recvq 取出G,把数据写入其中，最后把该G唤醒，结束发送过程（Channel大小为0的情形）</li><li>如果缓冲区中还有空余位置，直接将数据写入缓存区，结束发送过程（Channel没满，还可以继续写）</li><li>如果缓冲区中没有空余位置，将待发送的数据写入G中，将当前G加入sendq，进入睡眠，等待读G唤醒（Channel满了）</li></ul><h3 id="从Channel中读数据"><a href="#从Channel中读数据" class="headerlink" title="从Channel中读数据"></a>从Channel中读数据</h3><ul><li>如果等待发送队列sendq不为空&amp;&amp;没有缓冲区，直接从sendq中读取G，把阻塞的G唤醒，结束读取过程（Channel大小为0的情形）</li><li>如果等待发送队列不为空，则缓冲区已满，从缓冲区首部读取出数据，把G中数据写入缓冲区尾部，等待发送队列的首部元素唤醒，结束读取过程（Channel满了，并且还有一大堆的G等待着给Channel发送数据，在那块阻塞等待着）</li><li>如果缓存区中有数据，则从缓冲区中读取数据，结束读取过程（Channel还没满，正常读取队列的首部）</li><li>如果sendq为空，等待，进入睡眠，等待被写G唤醒（没数据了，等着有人写数据进来）</li></ul><h3 id="Channel的用法"><a href="#Channel的用法" class="headerlink" title="Channel的用法"></a>Channel的用法</h3><p>待续。。。。</p>]]></content>
    
    
    
    <tags>
      
      <tag>Go专家编程</tag>
      
      <tag>Channel</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【读Go专家编程】之Slice篇</title>
    <link href="/2023/10/13/%E3%80%90%E8%AF%BBGo%E4%B8%93%E5%AE%B6%E7%BC%96%E7%A8%8B%E3%80%91%E4%B9%8BSlice%E7%AF%87/"/>
    <url>/2023/10/13/%E3%80%90%E8%AF%BBGo%E4%B8%93%E5%AE%B6%E7%BC%96%E7%A8%8B%E3%80%91%E4%B9%8BSlice%E7%AF%87/</url>
    
    <content type="html"><![CDATA[<h2 id="Slice的实现原理"><a href="#Slice的实现原理" class="headerlink" title="Slice的实现原理"></a>Slice的实现原理</h2><p>Slice依托数组实现，底层数组对用户屏蔽，底层数组在Cap不足时，会自动扩容，生成一个新的Slice</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> slice <span class="hljs-keyword">struct</span> &#123;<br>    array unsafe.Pointer<br>    <span class="hljs-built_in">len</span>   <span class="hljs-type">int</span><br>    <span class="hljs-built_in">cap</span>   <span class="hljs-type">int</span><br>&#125;<br></code></pre></td></tr></table></figure><p>从数据结构看Slice很清晰, array指针指向底层数组，len表示切片长度，cap表示底层数组容量</p><h2 id="使用Array创建Slice"><a href="#使用Array创建Slice" class="headerlink" title="使用Array创建Slice"></a>使用Array创建Slice</h2><p>当我们用Array创建Slice时，所创建的Slice会和原数组公用一部分内存</p><p>eg: slice:&#x3D;<code>array[5:7]</code> </p><p><img src="https://static.sitestack.cn/projects/GoExpertProgramming/chapter01/images/slice-02-create_slice_from_array.png"></p><p><strong>注意</strong>：创建的Slice的cap为array的5那个位置开始到array的末尾位置（所以，slice的cap为9-5+1）</p><h2 id="Slice的扩容"><a href="#Slice的扩容" class="headerlink" title="Slice的扩容"></a>Slice的扩容</h2><p>当Cap小于Len时，元素插不进去了，所以开始扩容</p><h3 id="扩容策略"><a href="#扩容策略" class="headerlink" title="扩容策略"></a>扩容策略</h3><ul><li>如果原Slice容量小于1024，则新Slice容量将扩大为原来的2倍；</li><li>如果原Slice容量大于等于1024，则新Slice容量将扩大为原来的1.25倍；</li></ul><h3 id="append-的过程"><a href="#append-的过程" class="headerlink" title="append 的过程"></a>append 的过程</h3><ul><li>假如Slice容量够用，则将新元素追加进去，Slice.len++，返回原Slice</li><li>原Slice容量不够，则将Slice先扩容，扩容后得到新Slice</li><li>将新元素追加进新Slice，Slice.len++，返回新的Slice。</li></ul><h2 id="Slice-Copy"><a href="#Slice-Copy" class="headerlink" title="Slice Copy"></a>Slice Copy</h2><p>Go 标准库提供了 <code>copy</code> 函数，可以用于将一个切片的内容复制到另一个切片。这种方法允许你精确控制复制的元素数量。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go">originalSlice := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;<br>copiedSlice := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">3</span>) <span class="hljs-comment">// 创建一个长度为3的目标切片</span><br><span class="hljs-built_in">copy</span>(copiedSlice, originalSlice[<span class="hljs-number">1</span>:<span class="hljs-number">4</span>]) <span class="hljs-comment">// 复制 originalSlice 中的第2到第4个元素到 copiedSlice</span><br></code></pre></td></tr></table></figure><h2 id="一种不太常见的slice用法"><a href="#一种不太常见的slice用法" class="headerlink" title="一种不太常见的slice用法"></a>一种不太常见的slice用法</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go">sliceA := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">//length = 5; capacity = 10</span><br>sliceB := sliceA[<span class="hljs-number">0</span>:<span class="hljs-number">5</span>]         <span class="hljs-comment">//length = 5; capacity = 10</span><br>sliceC := sliceA[<span class="hljs-number">0</span>:<span class="hljs-number">5</span>:<span class="hljs-number">5</span>]       <span class="hljs-comment">//length = 5; capacity = 5</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Slice</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Sort包的使用</title>
    <link href="/2023/09/23/Sort%E5%8C%85%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/09/23/Sort%E5%8C%85%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="Sort包的简介"><a href="#Sort包的简介" class="headerlink" title="Sort包的简介"></a>Sort包的简介</h2><p>Go语言标准库sort包中实现了３种基本的排序算法：<strong>插入排序</strong>、<strong>快排和堆排序</strong>。和其他语言中一样， 这三种方式都是不公开的，他们只在sort包内部使用。所以用户在使用sort包进行排序时无需考虑使 用那种排序方式，sort.Interface定义的三个方法：获取数据集合长度的Len()方法、比较两个元素 大小的Less()方法和交换两个元素位置的Swap()方法，就可以顺利对数据集合进行排序。sort包会 根据实际数据<strong>自动</strong>选择高效的排序算法。</p><h2 id="Sort包的使用"><a href="#Sort包的使用" class="headerlink" title="Sort包的使用"></a>Sort包的使用</h2><blockquote><p>Sort中有给基本数据类型如 int float 和string自定义sort</p></blockquote><h3 id="int-的排序"><a href="#int-的排序" class="headerlink" title="[]int 的排序"></a>[]int 的排序</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go">arr := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">10</span>&#125;<br>sort.Ints(arr)<br><br>sort.Sort(sort.IntSlice(arr))<br><span class="hljs-comment">//默认结果都是升序排列，如果我们想对一个 sortable object 进行逆序排序，可以自定义一个type。但 sort.Reverse 帮你省掉了这些代码。</span><br>sort.Sort(sort.Reverse(sort.IntSlice(arr)))<br></code></pre></td></tr></table></figure><h3 id="string的排序"><a href="#string的排序" class="headerlink" title="[]string的排序"></a>[]string的排序</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go">ss := []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;e&quot;</span>, <span class="hljs-string">&quot;ff&quot;</span>, <span class="hljs-string">&quot;-1&quot;</span>&#125;<br>sort.Strings(ss)<br><br>sort.Sort(sort.StringSlice(ss))<br><br>sort.Sort(sort.Reverse(sort.StringSlice(ss)))<br></code></pre></td></tr></table></figure><h3 id="float64-的排序"><a href="#float64-的排序" class="headerlink" title="[]float64 的排序"></a>[]float64 的排序</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go">fs := []<span class="hljs-type">float64</span>&#123;<span class="hljs-number">1.3</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">-90.2</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">0</span>&#125;<br>sort.Float64s(fs)<br><span class="hljs-comment">//查看是否已经排序成功（从小到大）</span><br>sort.IsSorted(sort.Float64Slice(fs))<br><br>sort.Sort(sort.Reverse(sort.Float64Slice(fs)))<br><br></code></pre></td></tr></table></figure><h3 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h3><p>go语言中的二分查找算法用来搜索指定<strong>已经排完序</strong>的切片[0:n]中值为Value的元素的<strong>下标</strong>，如果有多个相同Value的元素，则返回<strong>第一个</strong>值为Value的元素的下标；如果不存值为Value的元素，则返回切片的长度 <strong>n</strong> </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go">nums := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>&#125;<br><br><span class="hljs-comment">// 要查找的值</span><br>target := <span class="hljs-number">7</span><br><br><span class="hljs-comment">// 使用Search函数查找值的索引</span><br>index := sort.Search(<span class="hljs-built_in">len</span>(nums), <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> nums[i] &gt; target<br>&#125;)<br><br><span class="hljs-comment">// 检查是否找到</span><br><span class="hljs-keyword">if</span> index &lt; <span class="hljs-built_in">len</span>(nums) &amp;&amp; nums[index] == target &#123;<br>fmt.Printf(<span class="hljs-string">&quot;%d 找到在索引 %d 处\n&quot;</span>, target, index)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>fmt.Printf(<span class="hljs-string">&quot;%d 未找到\n&quot;</span>, target)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="自定义排序"><a href="#自定义排序" class="headerlink" title="自定义排序"></a>自定义排序</h3><blockquote><p>自定义sort.Interface排序 ,此时我们 需要重写 Swap Less Len 方法</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;sort&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> Peak <span class="hljs-keyword">struct</span> &#123;<br>Name   <span class="hljs-type">string</span><br>Height <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-keyword">type</span> Peaks []Peak<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ps Peaks)</span></span> Len() <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(ps)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ps Peaks)</span></span> Less(i, j <span class="hljs-type">int</span>) <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> ps[i].Height &lt; ps[j].Height<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ps Peaks)</span></span> Swap(i, j <span class="hljs-type">int</span>) &#123;<br>ps[i], ps[j] = ps[j], ps[i]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>ps := Peaks&#123;&#123;<br>Name:   <span class="hljs-string">&quot;mountain-1&quot;</span>,<br>Height: <span class="hljs-number">1</span>,<br>&#125;, &#123;<br>Name:   <span class="hljs-string">&quot;mountain-2&quot;</span>,<br>Height: <span class="hljs-number">2</span>,<br>&#125;, &#123;<br>Name:   <span class="hljs-string">&quot;mountain-10&quot;</span>,<br>Height: <span class="hljs-number">-100</span>,<br>&#125;&#125;<br>fmt.Println(<span class="hljs-string">&quot;before &quot;</span>, ps)<br>sort.Sort(ps)<br>fmt.Println(<span class="hljs-string">&quot;after &quot;</span>, ps)<br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote><p>使用 sort.Slice</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;sort&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> Peak <span class="hljs-keyword">struct</span> &#123;<br>Name   <span class="hljs-type">string</span><br>Height <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-keyword">type</span> Peaks []Peak<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ps Peaks)</span></span> Len() <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(ps)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ps Peaks)</span></span> Less(i, j <span class="hljs-type">int</span>) <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> ps[i].Height &lt; ps[j].Height<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ps Peaks)</span></span> Swap(i, j <span class="hljs-type">int</span>) &#123;<br>ps[i], ps[j] = ps[j], ps[i]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>ps := Peaks&#123;&#123;<br>Name:   <span class="hljs-string">&quot;mountain-1&quot;</span>,<br>Height: <span class="hljs-number">1</span>,<br>&#125;, &#123;<br>Name:   <span class="hljs-string">&quot;mountain-2&quot;</span>,<br>Height: <span class="hljs-number">2</span>,<br>&#125;, &#123;<br>Name:   <span class="hljs-string">&quot;mountain-10&quot;</span>,<br>Height: <span class="hljs-number">-100</span>,<br>&#125;&#125;<br>fmt.Println(<span class="hljs-string">&quot;Before &quot;</span>, ps)<br>sort.Slice(ps, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i, j <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> ps[i].Height &lt;= ps[j].Height<br>&#125;)<br>fmt.Println(<span class="hljs-string">&quot;After &quot;</span>, ps)<br><br>fmt.Println(<span class="hljs-string">&quot;----------------&quot;</span>)<br>sort.Slice(ps, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i, j <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> ps[i].Height &gt;= ps[j].Height<br>&#125;)<br>fmt.Println(<span class="hljs-string">&quot;after reverse &quot;</span>, ps)<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>-golang -sort包的使用</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Golang中的GC</title>
    <link href="/2023/09/22/Golang%E4%B8%AD%E7%9A%84GC/"/>
    <url>/2023/09/22/Golang%E4%B8%AD%E7%9A%84GC/</url>
    
    <content type="html"><![CDATA[<p>三色标记</p><p>混合写屏障</p><p>Mark Sweep的缺点</p><ul><li>STW，stop the world；让程序暂停，程序出现卡顿 **(重要问题)**；</li><li>标记需要扫描整个heap；</li><li>清除数据会产生heap碎片。</li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>【2023年目标】</title>
    <link href="/2023/09/17/%E3%80%902023%E5%B9%B4%E7%9B%AE%E6%A0%87%E3%80%91/"/>
    <url>/2023/09/17/%E3%80%902023%E5%B9%B4%E7%9B%AE%E6%A0%87%E3%80%91/</url>
    
    <content type="html"><![CDATA[<ul><li><input disabled="" type="checkbox"> leetcode 400+</li><li><input disabled="" type="checkbox"> 项目 3+ 一个单体web 一个微服务web  一个轮子</li><li><input disabled="" type="checkbox"> 跑量 2000+</li><li><input checked="" disabled="" type="checkbox"> 阅读书籍 5+</li><li><input disabled="" type="checkbox"> 写blog 20+</li><li><input disabled="" type="checkbox"> 完成基本的计算机四大件的复习</li><li><input disabled="" type="checkbox"> 找一个女朋友</li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>golang代码积累</title>
    <link href="/2023/09/13/golang%E4%BB%A3%E7%A0%81%E7%A7%AF%E7%B4%AF/"/>
    <url>/2023/09/13/golang%E4%BB%A3%E7%A0%81%E7%A7%AF%E7%B4%AF/</url>
    
    <content type="html"><![CDATA[<h3 id="连接字符串"><a href="#连接字符串" class="headerlink" title="连接字符串"></a>连接字符串</h3><ul><li><p>str1+str2</p></li><li><p>fmt.Sprintf(“%s%s”,str1,str2)</p></li><li><p>strings.Builder</p></li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go">str1 := <span class="hljs-string">&quot;str1&quot;</span><br>str2 := <span class="hljs-string">&quot;str2&quot;</span><br><br>fmt.Println(str1 + str2)<br><br>fmt.Println(fmt.Sprintf(<span class="hljs-string">&quot;%s%s&quot;</span>, str1, str2))<br><br><span class="hljs-keyword">var</span> stringbuilder strings.Builder<br>stringbuilder.WriteString(str1)<br><br>stringbuilder.WriteString(str2)<br><br>fmt.Println(stringbuilder.String())<br></code></pre></td></tr></table></figure><h3 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-keyword">type</span> Stack <span class="hljs-keyword">struct</span> &#123;<br>items []<span class="hljs-keyword">interface</span>&#123;&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *Stack)</span></span> Push(item <span class="hljs-keyword">interface</span>&#123;&#125;) &#123;<br>s.items = <span class="hljs-built_in">append</span>(s.items, item)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *Stack)</span></span> Pop() <span class="hljs-keyword">interface</span>&#123;&#125; &#123;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(s.items) == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br>item := s.items[<span class="hljs-built_in">len</span>(s.items)<span class="hljs-number">-1</span>]<br>s.items = s.items[:<span class="hljs-built_in">len</span>(s.items)<span class="hljs-number">-1</span>]<br><span class="hljs-keyword">return</span> item<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *Stack)</span></span> Peek() <span class="hljs-keyword">interface</span>&#123;&#125; &#123;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(s.items) == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br><span class="hljs-keyword">return</span> s.items[<span class="hljs-built_in">len</span>(s.items)<span class="hljs-number">-1</span>]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *Stack)</span></span> IsEmpty() <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(s.items) == <span class="hljs-number">0</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *Stack)</span></span> Size() <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(s.items)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>stack := Stack&#123;&#125;<br><br>stack.Push(<span class="hljs-number">1</span>)<br>stack.Push(<span class="hljs-number">2</span>)<br>stack.Push(<span class="hljs-number">3</span>)<br><br>fmt.Println(<span class="hljs-string">&quot;Stack:&quot;</span>, stack.items)<br>fmt.Println(<span class="hljs-string">&quot;Top:&quot;</span>, stack.Peek())<br>fmt.Println(<span class="hljs-string">&quot;Pop:&quot;</span>, stack.Pop())<br>fmt.Println(<span class="hljs-string">&quot;Stack:&quot;</span>, stack.items)<br>fmt.Println(<span class="hljs-string">&quot;Is Empty?&quot;</span>, stack.IsEmpty())<br>fmt.Println(<span class="hljs-string">&quot;Size:&quot;</span>, stack.Size())<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-keyword">type</span> Queue <span class="hljs-keyword">struct</span> &#123;<br>items []<span class="hljs-keyword">interface</span>&#123;&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span></span> Enqueue(item <span class="hljs-keyword">interface</span>&#123;&#125;) &#123;<br>q.items = <span class="hljs-built_in">append</span>(q.items, item)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span></span> Dequeue() <span class="hljs-keyword">interface</span>&#123;&#125; &#123;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(q.items) == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br>front := q.items[<span class="hljs-number">0</span>]<br>q.items = q.items[<span class="hljs-number">1</span>:]<br><span class="hljs-keyword">return</span> front<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span></span> Front() <span class="hljs-keyword">interface</span>&#123;&#125; &#123;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(q.items) == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br><span class="hljs-keyword">return</span> q.items[<span class="hljs-number">0</span>]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span></span> IsEmpty() <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(q.items) == <span class="hljs-number">0</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span></span> Size() <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(q.items)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>queue := Queue&#123;&#125;<br><br>queue.Enqueue(<span class="hljs-number">1</span>)<br>queue.Enqueue(<span class="hljs-number">2</span>)<br>queue.Enqueue(<span class="hljs-number">3</span>)<br><br>fmt.Println(<span class="hljs-string">&quot;Queue:&quot;</span>, queue.items)<br>fmt.Println(<span class="hljs-string">&quot;Front:&quot;</span>, queue.Front())<br>fmt.Println(<span class="hljs-string">&quot;Dequeue:&quot;</span>, queue.Dequeue())<br>fmt.Println(<span class="hljs-string">&quot;Queue:&quot;</span>, queue.items)<br>fmt.Println(<span class="hljs-string">&quot;Is Empty?&quot;</span>, queue.IsEmpty())<br>fmt.Println(<span class="hljs-string">&quot;Size:&quot;</span>, queue.Size())<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="Priority-Queue"><a href="#Priority-Queue" class="headerlink" title="Priority Queue"></a>Priority Queue</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;container/heap&quot;</span><br><span class="hljs-string">&quot;fmt&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> Item <span class="hljs-keyword">struct</span> &#123;<br>value    <span class="hljs-type">string</span><br>priority <span class="hljs-type">int</span><br>&#125;<br><span class="hljs-keyword">type</span> PriorityQueue []*Item<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq PriorityQueue)</span></span> Len() <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(pq)<br>&#125;<br><span class="hljs-comment">// &lt; 表示最小堆 返回堆顶，即priority最小的值</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq PriorityQueue)</span></span> Less(i, j <span class="hljs-type">int</span>) <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> pq[i].priority &lt; pq[j].priority<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq PriorityQueue)</span></span> Swap(i, j <span class="hljs-type">int</span>) &#123;<br>pq[i], pq[j] = pq[j], pq[i]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq *PriorityQueue)</span></span> Push(x <span class="hljs-keyword">interface</span>&#123;&#125;) &#123;<br>item := x.(*Item)<br>*pq = <span class="hljs-built_in">append</span>(*pq, item)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq *PriorityQueue)</span></span> Pop() <span class="hljs-keyword">interface</span>&#123;&#125; &#123;<br>old := *pq<br>n := <span class="hljs-built_in">len</span>(old)<br>item := old[n<span class="hljs-number">-1</span>]<br>*pq = old[<span class="hljs-number">0</span> : n<span class="hljs-number">-1</span>]<br><span class="hljs-keyword">return</span> item<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>pq := <span class="hljs-built_in">make</span>(PriorityQueue, <span class="hljs-number">0</span>)<br><br>heap.Init(&amp;pq)<br>items := []*Item&#123;<br>&#123;<br>value:    <span class="hljs-string">&quot;C&quot;</span>,<br>priority: <span class="hljs-number">3</span>,<br>&#125;,<br>&#123;<br>value:    <span class="hljs-string">&quot;A&quot;</span>,<br>priority: <span class="hljs-number">1</span>,<br>&#125;,<br>&#123;<br>value:    <span class="hljs-string">&quot;B&quot;</span>,<br>priority: <span class="hljs-number">2</span>,<br>&#125;,<br>&#125;<br><span class="hljs-keyword">for</span> _, item := <span class="hljs-keyword">range</span> items &#123;<br>heap.Push(&amp;pq, item)<br>&#125;<br><br><span class="hljs-keyword">for</span> pq.Len() &gt; <span class="hljs-number">0</span> &#123;<br>item := heap.Pop(&amp;pq).(*Item)<br>fmt.Printf(<span class="hljs-string">&quot;%s( Priority:%d)&quot;</span>, item.value, item.priority)<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="层次遍历"><a href="#层次遍历" class="headerlink" title="层次遍历"></a>层次遍历</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">/**<br> * Definition for a binary tree node.<br> * type TreeNode struct &#123;<br> *     Val int<br> *     Left *TreeNode<br> *     Right *TreeNode<br> * &#125;<br> */<br></code></pre></td></tr></table></figure><h4 id="version-1"><a href="#version-1" class="headerlink" title="version 1"></a>version 1</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">levelOrder</span><span class="hljs-params">(root *TreeNode)</span></span>(res []<span class="hljs-type">int</span>)&#123;<br>    <span class="hljs-keyword">if</span> root==<span class="hljs-literal">nil</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>    &#125;<br>    cur:=<span class="hljs-built_in">make</span>([]*TreeNode,<span class="hljs-number">0</span>)<br>    cur=<span class="hljs-built_in">append</span>(cur,root)<br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(cur)&gt;<span class="hljs-number">0</span>&#123;<br>        nodes:=<span class="hljs-built_in">make</span>([]*TreeNode,<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">for</span> _,node:=<span class="hljs-keyword">range</span> cur&#123;<br>            res=<span class="hljs-built_in">append</span>(res,node.Val)<br>            <span class="hljs-keyword">if</span> node.Left!=<span class="hljs-literal">nil</span>&#123;<br>                nodes=<span class="hljs-built_in">append</span>(nodes,node.Left)<br>            &#125;<br>            <span class="hljs-keyword">if</span> node.Right!=<span class="hljs-literal">nil</span>&#123;<br>                nodes=<span class="hljs-built_in">append</span>(nodes,node.Right)<br>            &#125;<br>        &#125;<br>        cur=nodes<br>    &#125;<br>    <span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="version-2"><a href="#version-2" class="headerlink" title="version 2"></a>version 2</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">levelOrder</span><span class="hljs-params">(root *TreeNode)</span></span>(res [][]<span class="hljs-type">int</span>)&#123;<br>    <span class="hljs-keyword">if</span> root==<span class="hljs-literal">nil</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>    &#125;<br>    cur:=<span class="hljs-built_in">make</span>([]*TreeNode,<span class="hljs-number">0</span>)<br>    <span class="hljs-comment">//将首元节点插入</span><br>    cur=<span class="hljs-built_in">append</span>(cur,root)<br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(cur)&gt;<span class="hljs-number">0</span>&#123;<br>        tempRes:=<span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>,<span class="hljs-number">0</span>)<br>        nodes:=<span class="hljs-built_in">make</span>([]*TreeNode,<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">for</span> _,node:=<span class="hljs-keyword">range</span> cur&#123;<br>            tempRes=<span class="hljs-built_in">append</span>(tempRes,node.Val)<br>            <span class="hljs-keyword">if</span> node.Left!=<span class="hljs-literal">nil</span>&#123;<br>                nodes=<span class="hljs-built_in">append</span>(nodes,node.Left)<br>            &#125;<br>            <span class="hljs-keyword">if</span> node.Right!=<span class="hljs-literal">nil</span>&#123;<br>                nodes=<span class="hljs-built_in">append</span>(nodes,node.Right)<br>            &#125;<br>        &#125;<br>        res=<span class="hljs-built_in">append</span>(res,tempRes)<br>        cur=nodes<br>    &#125;<br>    <span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="version-3"><a href="#version-3" class="headerlink" title="version 3"></a>version 3</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">levelOrder</span><span class="hljs-params">(root *TreeNode)</span></span> (res [][]<span class="hljs-type">int</span>) &#123;<br><span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span> [][]<span class="hljs-type">int</span>&#123;&#125;<br>&#125;<br>cur := <span class="hljs-built_in">make</span>([]*TreeNode,<span class="hljs-number">0</span>)<br>cur=<span class="hljs-built_in">append</span>(cur,root)<br>cnt := <span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(cur) &gt; <span class="hljs-number">0</span> &#123;<br>arr := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>)<br>nodes := <span class="hljs-built_in">make</span>([]*TreeNode, <span class="hljs-number">0</span>)<br><span class="hljs-keyword">for</span> _, node := <span class="hljs-keyword">range</span> cur &#123;<br><span class="hljs-keyword">if</span> node.Left != <span class="hljs-literal">nil</span> &#123;<br>nodes = <span class="hljs-built_in">append</span>(nodes, node.Left)<br>&#125;<br><span class="hljs-keyword">if</span> node.Right != <span class="hljs-literal">nil</span> &#123;<br>nodes = <span class="hljs-built_in">append</span>(nodes, node.Right)<br>&#125;<br>arr = <span class="hljs-built_in">append</span>(arr, node.Val)<br>&#125;<br><span class="hljs-keyword">if</span> cnt==<span class="hljs-number">-1</span>&#123;<br><span class="hljs-keyword">for</span> i,Len:=<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(arr);i&lt;<span class="hljs-built_in">len</span>(arr)/<span class="hljs-number">2</span>;i++&#123;<br>arr[Len<span class="hljs-number">-1</span>-i],arr[i]=arr[i],arr[Len<span class="hljs-number">-1</span>-i]<br>&#125;<br>&#125;<br>cnt*=<span class="hljs-number">-1</span><br>res=<span class="hljs-built_in">append</span>(res,arr)<br>cur = nodes<br>&#125;<br><span class="hljs-keyword">return</span> res<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="检查是否为二叉搜索树"><a href="#检查是否为二叉搜索树" class="headerlink" title="检查是否为二叉搜索树"></a>检查是否为二叉搜索树</h4><h3 id="二叉树的中序遍历"><a href="#二叉树的中序遍历" class="headerlink" title="二叉树的中序遍历"></a>二叉树的中序遍历</h3><h4 id="version-1-递归"><a href="#version-1-递归" class="headerlink" title="version 1 递归"></a>version 1 递归</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">inorderTraversal</span><span class="hljs-params">(root *TreeNode)</span></span> (res []<span class="hljs-type">int</span>) &#123;<br><span class="hljs-comment">//边界条件</span><br><span class="hljs-comment">//自定义函数</span><br>    re := <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(root *TreeNode)</span></span> &#123;&#125;<br>re = <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(root *TreeNode)</span></span> &#123;<br><span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span><br>&#125;<br><span class="hljs-keyword">if</span> root.Left != <span class="hljs-literal">nil</span> &#123;<br>re(root.Left)<br>&#125;<br>res = <span class="hljs-built_in">append</span>(res, root.Val)<br><span class="hljs-keyword">if</span> root.Right != <span class="hljs-literal">nil</span> &#123;<br>re(root.Right)<br>&#125;<br>&#125;<br>re(root)<br><span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="version-2-迭代"><a href="#version-2-迭代" class="headerlink" title="version 2 迭代"></a>version 2 迭代</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isValidBST</span><span class="hljs-params">(root *TreeNode)</span></span><span class="hljs-type">bool</span>&#123;<br>    stack:=<span class="hljs-built_in">make</span>([]*TreeNode,<span class="hljs-number">0</span>)<br>    inorder:=math.MinInt64<br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(stack)&gt;<span class="hljs-number">0</span>||root!=<span class="hljs-literal">nil</span>&#123;<br>        <span class="hljs-keyword">for</span> root!=<span class="hljs-literal">nil</span>&#123;<br>            stack=<span class="hljs-built_in">append</span>(stack,root)<br>            root=root.Left<br>        &#125;<br>        root=stack[<span class="hljs-built_in">len</span>(stack)<span class="hljs-number">-1</span>]<br>        stack=stack[:<span class="hljs-built_in">len</span>(stack)<span class="hljs-number">-1</span>]<br>        <span class="hljs-keyword">if</span> root.Val&lt;=inorder&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>        inorder=root.Val<br>        root=root.Right<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="计算二叉树的深度"><a href="#计算二叉树的深度" class="headerlink" title="计算二叉树的深度"></a>计算二叉树的深度</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span>&#123;<br>    <span class="hljs-keyword">if</span> a&gt;b&#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxDepth</span><span class="hljs-params">(root *TreeNode)</span></span><span class="hljs-type">int</span>&#123;<br>    <span class="hljs-keyword">var</span> dfs <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(root *TreeNode)</span></span><span class="hljs-type">int</span><br>    dfs=<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(root *TreeNode)</span></span><span class="hljs-type">int</span>&#123;<br>        <span class="hljs-keyword">if</span> root==<span class="hljs-literal">nil</span>&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> max(dfs(root.Left),dfs(root.Right))+<span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> dfs(root)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="平衡二叉树的判断"><a href="#平衡二叉树的判断" class="headerlink" title="平衡二叉树的判断"></a>平衡二叉树的判断</h3><p>平衡二叉树中的每一个节点的左右子树的高度差不超过2</p><p>思路：在每一个节点求得其左右子树的高度，判断是否符合平衡二叉树的要求</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span>&#123;<br><span class="hljs-keyword">if</span> a&gt;b&#123;<br><span class="hljs-keyword">return</span> a<br>&#125;<br><span class="hljs-keyword">return</span> b<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getDepth</span><span class="hljs-params">(root *TreeNode)</span></span><span class="hljs-type">int</span>&#123;<br><span class="hljs-keyword">if</span> root==<span class="hljs-literal">nil</span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>&#125;<br><span class="hljs-keyword">return</span> max(getDepth(root.Left),getDepth(root.Right))+<span class="hljs-number">1</span><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">abs</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span>&#123;<br><span class="hljs-keyword">if</span> a&gt;b&#123;<br><span class="hljs-keyword">return</span> a-b<br>&#125;<br><span class="hljs-keyword">return</span> b-a<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isBalanced</span><span class="hljs-params">(root *TreeNode)</span></span><span class="hljs-type">bool</span>&#123;<br><span class="hljs-keyword">if</span> root==<span class="hljs-literal">nil</span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br><span class="hljs-keyword">return</span> isBalanced(root.Left)&amp;&amp;<br>isBalanced(root.Right)&amp;&amp;abs(getDepth(root.Left),getDepth(root.Right))&lt;<span class="hljs-number">2</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="二叉搜索树与双向链表"><a href="#二叉搜索树与双向链表" class="headerlink" title="二叉搜索树与双向链表"></a>二叉搜索树与双向链表</h3><p>要求：不创建任何新的节点，只能调整树中节点指针的指向,最终形成一个有序的双向链表，返回头结点</p><p>思路：因为用中序遍历二叉搜索树，得到的是一个从小到大的有序结果，所以我们可以利用中序遍历的特性，在其中把节点与节点连接起来，最终就可以得到一个有序双向链表</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    Node* head=<span class="hljs-literal">nullptr</span>;<br>    Node *prev=<span class="hljs-literal">nullptr</span>;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(Node* cur)</span></span>&#123;<br>       <span class="hljs-keyword">if</span>(cur==<span class="hljs-literal">NULL</span>)&#123;<br>           <span class="hljs-keyword">return</span> ;<br>       &#125;<br>        <span class="hljs-built_in">dfs</span>(cur-&gt;left);<br>        <span class="hljs-comment">//找到tree中最小值</span><br>        <span class="hljs-keyword">if</span> (head==<span class="hljs-literal">NULL</span>)&#123;<br>            head=cur;<br>            prev=cur;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-comment">//找到较小值</span><br>            prev-&gt;right=cur;<br>            cur-&gt;left=prev;<br>            prev=cur;<br>        &#125;<br>        <span class="hljs-built_in">dfs</span>(cur-&gt;right);<br>    &#125;<br>    <span class="hljs-function">Node* <span class="hljs-title">treeToDoublyList</span><span class="hljs-params">(Node* root)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (root==<span class="hljs-literal">NULL</span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br>        &#125;<br>        <span class="hljs-built_in">dfs</span>(root);<br>        <span class="hljs-comment">//双向链表收尾相连</span><br>        prev-&gt;right=head;<br>        head-&gt;left=prev;<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="重构二叉树"><a href="#重构二叉树" class="headerlink" title="重构二叉树"></a><strong>重构二叉树</strong></h3><p>根据前序遍历和中序遍历重构 得到后序遍历</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs go"><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">buildTree</span><span class="hljs-params">(pr []<span class="hljs-type">int</span>, in []<span class="hljs-type">int</span>)</span></span> (head *TreeNode) &#123;<br><span class="hljs-keyword">var</span> dfs <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(pr []<span class="hljs-type">int</span>, in []<span class="hljs-type">int</span>, l0 <span class="hljs-type">int</span>, r0 <span class="hljs-type">int</span>, l1 <span class="hljs-type">int</span>, r1 <span class="hljs-type">int</span>)</span></span> *TreeNode<br><span class="hljs-comment">// 用map来快速得到中序遍历中pr[l0]的位置</span><br>    pos := <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">int</span>&#123;&#125;<br><span class="hljs-keyword">for</span> idx, v := <span class="hljs-keyword">range</span> in &#123;<br>pos[v] = idx<br>&#125;<br>dfs = <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(pr []<span class="hljs-type">int</span>, in []<span class="hljs-type">int</span>, l0 <span class="hljs-type">int</span>, r0 <span class="hljs-type">int</span>, l1 <span class="hljs-type">int</span>, r1 <span class="hljs-type">int</span>)</span></span> *TreeNode &#123;<br><span class="hljs-keyword">if</span> l0 &gt; r0 &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br><br>root := &amp;TreeNode&#123;Val: pr[l0]&#125;<br>idx := pos[pr[l0]]<br>lsize := idx - l1<br><span class="hljs-comment">//rsize:=r1-idx</span><br><span class="hljs-comment">// [l0+1,lsize+l0] [lsize+l0+1,r0]</span><br><span class="hljs-comment">// [l1,idx-1] [addr+1,r1]</span><br><br>root.Left = dfs(pr, in, l0+<span class="hljs-number">1</span>, lsize+l0, l1, idx<span class="hljs-number">-1</span>)<br>root.Right = dfs(pr, in, lsize+l0+<span class="hljs-number">1</span>, r0, idx+<span class="hljs-number">1</span>, r1)<br><span class="hljs-keyword">return</span> root<br>&#125;<br><br><span class="hljs-keyword">return</span> dfs(pr, in, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(pr)<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(in)<span class="hljs-number">-1</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="二叉搜索树的后序遍历"><a href="#二叉搜索树的后序遍历" class="headerlink" title="二叉搜索树的后序遍历"></a>二叉搜索树的后序遍历</h3><p>后序遍历中的最后一个结果是该遍历结果的根节点，可以从头遍历 遍历结果，查看小于根节点的元素，再往后遍历大于根节点的元素，如果其中有比根节点小的元素，则此二叉树不是二叉搜索树</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">verifyPostorder</span><span class="hljs-params">(postorder []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">var</span> dfs <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(arr []<span class="hljs-type">int</span>, l, r <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span><br><br>dfs = <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(arr []<span class="hljs-type">int</span>, l, r <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">if</span> r &lt;= l &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br>mid:=arr[r]<br><span class="hljs-keyword">var</span> p <span class="hljs-type">int</span>=l<br><span class="hljs-keyword">for</span> arr[p]&lt;mid&#123;<br>p++<br>&#125;<br><br><span class="hljs-keyword">var</span> idx <span class="hljs-type">int</span>=p<br><span class="hljs-keyword">for</span> arr[p]&gt;mid&#123;<br>p++<br>&#125;<br><span class="hljs-keyword">return</span> p==r&amp;&amp;dfs(arr,l,idx<span class="hljs-number">-1</span>)&amp;&amp;dfs(arr,idx,r<span class="hljs-number">-1</span>)<br>&#125;<br><span class="hljs-keyword">return</span> dfs(postorder, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(postorder)<span class="hljs-number">-1</span>)<br>&#125;   <br></code></pre></td></tr></table></figure><h3 id="lowerbit的求法"><a href="#lowerbit的求法" class="headerlink" title="lowerbit的求法"></a>lowerbit的求法</h3><p>lowerbit&#x3D;n&amp;(-n)</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//快速求得一个数在二进制中每一个1所在位置代表的值大小</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hammingWeight</span><span class="hljs-params">(num <span class="hljs-type">uint32</span>)</span></span> (cnt <span class="hljs-type">int</span>) &#123;<br><span class="hljs-keyword">for</span> num &gt; <span class="hljs-number">0</span> &#123;<br>lowbit := num &amp; (-num)<br>num -= lowbit<br>cnt++<br>&#125;<br><span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="位运算专题"><a href="#位运算专题" class="headerlink" title="位运算专题"></a>位运算专题</h2><h3 id="抑或的用法"><a href="#抑或的用法" class="headerlink" title="抑或的用法"></a>抑或的用法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 其中抑或相当于一个不会进位的加法</span><br>1^1=0<br>0^1=1<br>0^0=0<br><br><span class="hljs-comment">#两个相同的数向抑或，结果为0</span><br><span class="hljs-comment">#一个数与0向抑或的结果是原数</span><br>a^a=0<br>0^a=a<br><br>a^b=c<br>c^a=b<br>b^c=a<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/count-triplets-that-can-form-two-arrays-of-equal-xor/description/">1442. 形成两个异或相等数组的三元组数目 - 力扣（LeetCode）</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//leetcode 1442</span><br><span class="hljs-comment">//</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">countTriplets</span><span class="hljs-params">(arr []<span class="hljs-type">int</span>)</span></span> (cnt <span class="hljs-type">int</span>) &#123;<br>n := <span class="hljs-built_in">len</span>(arr)<br>orres := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n+<span class="hljs-number">1</span>)<br><br>orres[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> idx, v := <span class="hljs-keyword">range</span> arr &#123;<br>orres[idx+<span class="hljs-number">1</span>] = orres[idx] ^ v<br>&#125;<br><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= n; i++ &#123;<br><span class="hljs-keyword">for</span> j := i + <span class="hljs-number">1</span>; j &lt;=n &amp;&amp; i &lt; j; j++ &#123;<br><span class="hljs-keyword">if</span> orres[j]^orres[i<span class="hljs-number">-1</span>] == <span class="hljs-number">0</span> &#123;<br><span class="hljs-comment">//i j 可以</span><br>cnt += j - i <br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/maximum-xor-of-two-numbers-in-an-array/">421. 数组中两个数的最大异或值 - 力扣（LeetCode）</a></p><p>构造 字典树 快速知晓数组中的其他数字的每一位的bit的大小，利用贪心，1^0&#x3D;1</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs go"><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span>&#123;<br><span class="hljs-keyword">if</span> a&gt;b&#123;<br><span class="hljs-keyword">return</span> a<br>&#125;<br><span class="hljs-keyword">return</span> b<br>&#125;<br><br><span class="hljs-keyword">const</span> heightbit=<span class="hljs-number">30</span><br><br><span class="hljs-keyword">type</span> trie <span class="hljs-keyword">struct</span> &#123;<br>left,right *trie<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *trie)</span></span> add(num <span class="hljs-type">int</span>)&#123;<br>cur:=t<br><span class="hljs-keyword">for</span> i:=heightbit;i&gt;=<span class="hljs-number">0</span>;i--&#123;<br>bit:=(num&gt;&gt;i)&amp;<span class="hljs-number">1</span><br><span class="hljs-keyword">if</span> bit==<span class="hljs-number">0</span>&#123;<br><span class="hljs-keyword">if</span> cur.left==<span class="hljs-literal">nil</span>&#123;<br>cur.left=&amp;trie&#123;&#125;<br>                cur=cur.left<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>cur=cur.left<br>&#125;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-keyword">if</span> cur.right==<span class="hljs-literal">nil</span>&#123;<br>cur.right=&amp;trie&#123;&#125;<br>                cur=cur.right<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>cur=cur.right<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *trie)</span></span>check(num <span class="hljs-type">int</span>)(res <span class="hljs-type">int</span>)&#123;<br>cur:=t<br><span class="hljs-keyword">for</span> i:=heightbit;i&gt;=<span class="hljs-number">0</span>;i--&#123;<br>b:=(num&gt;&gt;i)&amp;<span class="hljs-number">1</span><br><span class="hljs-keyword">if</span> b==<span class="hljs-number">0</span>&#123;<br><span class="hljs-comment">//需要1</span><br><span class="hljs-keyword">if</span> cur.right!=<span class="hljs-literal">nil</span>&#123;<br>res|=(<span class="hljs-number">1</span>&lt;&lt;i)<br>                cur=cur.right<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                cur=cur.left<br>            &#125;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-comment">//需要0</span><br><span class="hljs-keyword">if</span> cur.left!=<span class="hljs-literal">nil</span>&#123;<br>res|=(<span class="hljs-number">1</span>&lt;&lt;i)<br>                cur=cur.left<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                cur=cur.right<br>            &#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findMaximumXOR</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> (x <span class="hljs-type">int</span>) &#123;<br>root := *&amp;trie&#123;&#125;<br><span class="hljs-keyword">for</span> i:=<span class="hljs-number">1</span>;i&lt;<span class="hljs-built_in">len</span>(nums);i++&#123;<br>root.add(nums[i<span class="hljs-number">-1</span>])<br>x = max(x, root.check(nums[i]))<br>&#125;<br><span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>【redis】ZSet的使用</title>
    <link href="/2023/09/13/%E3%80%90redis%E3%80%91ZSet%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/09/13/%E3%80%90redis%E3%80%91ZSet%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="准备动作"><a href="#准备动作" class="headerlink" title="准备动作"></a>准备动作</h2><h3 id="启动docker"><a href="#启动docker" class="headerlink" title="启动docker"></a>启动docker</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -d -p 6379:6379 --name redis redis<br></code></pre></td></tr></table></figure><h3 id="查看docke状态"><a href="#查看docke状态" class="headerlink" title="查看docke状态"></a>查看docke状态</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker ps<br></code></pre></td></tr></table></figure><h3 id="进入redis-cli"><a href="#进入redis-cli" class="headerlink" title="进入redis-cli"></a>进入redis-cli</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli<br></code></pre></td></tr></table></figure><h2 id="Zset的基本指令集合"><a href="#Zset的基本指令集合" class="headerlink" title="Zset的基本指令集合"></a>Zset的基本指令集合</h2><h3 id="ZADD添加元素-O-log-N"><a href="#ZADD添加元素-O-log-N" class="headerlink" title="ZADD添加元素 O(log(N))"></a><strong>ZADD</strong>添加元素 O(log(N))</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs redis">zadd myzset 1 &quot;1&quot;<br></code></pre></td></tr></table></figure><h3 id="ZREM-删除元素"><a href="#ZREM-删除元素" class="headerlink" title="ZREM 删除元素"></a><strong>ZREM</strong> 删除元素</h3><p>​O(M*log(N)) with N being the number of elements in the sorted set and M the number of elements to be removed.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ZREM myzset &quot;one&quot;<br></code></pre></td></tr></table></figure><h3 id="ZCARD查看zset的元素个数O-1）"><a href="#ZCARD查看zset的元素个数O-1）" class="headerlink" title="ZCARD查看zset的元素个数O(1）"></a><strong>ZCARD</strong>查看zset的元素个数O(1）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zcard myzset <br></code></pre></td></tr></table></figure><h3 id="ZCOUNT-查看zset区间的与元素个数（默认为左闭右闭）O-log-N"><a href="#ZCOUNT-查看zset区间的与元素个数（默认为左闭右闭）O-log-N" class="headerlink" title="ZCOUNT 查看zset区间的与元素个数（默认为左闭右闭）O(log(N))"></a><strong>ZCOUNT</strong> 查看zset区间的与元素个数（默认为左闭右闭）O(log(N))</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zcount myzset 1 3#查看大于等于1小于等于3的<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zcount myzset (1 3 #查看大于1小于等于3的<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zcount myzset -inf +inf <br></code></pre></td></tr></table></figure><h3 id="ZINCRBY给元素添加值O-log-N"><a href="#ZINCRBY给元素添加值O-log-N" class="headerlink" title="ZINCRBY给元素添加值O(log(N)"></a><strong>ZINCRBY</strong>给元素添加值O(log(N)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ZINCRBY myzset -10 &quot;one&quot;<br></code></pre></td></tr></table></figure><h3 id="ZRANK-O-log-N"><a href="#ZRANK-O-log-N" class="headerlink" title="ZRANK O(log(N))"></a>ZRANK O(log(N))</h3><ul><li><p>键存在，返回排名（默认为从小到大排序），最小的排序名词为（0）</p></li><li><p>键不存在，返回nil</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zrank myzset &quot;one&quot;<br></code></pre></td></tr></table></figure></li></ul><h3 id="ZRANGE查询区间值的元素O-log-N-M"><a href="#ZRANGE查询区间值的元素O-log-N-M" class="headerlink" title="ZRANGE查询区间值的元素O(log(N)+M)"></a><strong>ZRANGE</strong>查询区间值的元素O(log(N)+M)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ZRANGE myzset -10 100 WITHSOCRES<br></code></pre></td></tr></table></figure><h3 id="ZINTERSTORE"><a href="#ZINTERSTORE" class="headerlink" title="ZINTERSTORE"></a><strong>ZINTERSTORE</strong></h3><p>有序集合（Sorted Set）的交集并将结果存储到新有序集合的命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ZINTERSTORE destination numkeys key [key ...] [WEIGHTS weight [weight ...]] [AGGREGATE SUM|MIN|MAX]<br></code></pre></td></tr></table></figure><p>参数说明：</p><ul><li><code>destination</code>：目标有序集合的键名，用于存储交集结果。</li><li><code>numkeys</code>：指定参与计算的有序集合的数量。</li><li><code>key [key ...]</code>：要参与计算交集的有序集合的键名列表。</li><li><code>WEIGHTS weight [weight ...]</code>（可选）：用于指定每个有序集合的权重，可以调整每个成员分数的权重。如果不指定权重，则默认为 1。</li><li><code>AGGREGATE SUM|MIN|MAX</code>（可选）：用于指定计算交集时的聚合方式，可以是 SUM（求和，默认）、MIN（最小值）或 MAX（最大值）。</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ZINTERSTORE intersection_max 2 set1 set2 AGGREGATE MAX<br></code></pre></td></tr></table></figure><h3 id="ZRANGEBULEX"><a href="#ZRANGEBULEX" class="headerlink" title="ZRANGEBULEX"></a><strong>ZRANGEBULEX</strong></h3><ul><li><p>按序返回指定成员区间的成员</p></li><li><p>区间成员的分数必须相同 </p></li><li><p>不要在分数不一致的SortSet集合中去使用 ZRANGEBYLEX 指令,因为获取的结果并不准确。</p></li><li><p>可以使用 “-“ 和 “+” 表示得分最小值和最大值</p></li><li><p>成员字符串作为二进制数组的字节数进行比较。默认是以ASCII字符集的顺序进行排列。</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">zadd zset 0 a 0 aa 0 abc 0 apple 0 b 0 c 0 d 0 d1 0 dd 0 dobble 0 z 0 z1<br>ZRANGEBYLEX zset - +<br><br>ZRANGEBYLEX zset - + limit 0 3  # 其中的0是结果的其实位置（offset） 3是结果的数量（count）<br><br>ZRANGEBULEX zset [aa [c<br><br>ZRANGEBULEX zset [aa (c<br></code></pre></td></tr></table></figure><h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><ul><li>姓名排序</li></ul>  <img src="https://www.helloimg.com/images/2023/09/13/onxM6Y.png" alt="zrangebylex" border="0"><ul><li><p>电话号码排序</p><p>  <a href="https://www.helloimg.com/image/onx9Qg"><img src="https://www.helloimg.com/images/2023/09/13/onx9Qg.png" alt="onx9Qg.png"></a></p></li></ul></li></ul><h2 id="go-redis的基本使用"><a href="#go-redis的基本使用" class="headerlink" title="go-redis的基本使用"></a>go-redis的基本使用</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">go get github.com/go-redis/redis/v8<br></code></pre></td></tr></table></figure><h3 id="连接local-redis"><a href="#连接local-redis" class="headerlink" title="连接local  redis"></a>连接local  redis</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">doCommand</span><span class="hljs-params">()</span></span> &#123;<br>rdb := redis.NewClient(&amp;redis.Options&#123;<br>Addr:     <span class="hljs-string">&quot;localhost:6379&quot;</span>,<br>Password: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">// 密码</span><br>DB:       <span class="hljs-number">0</span>,  <span class="hljs-comment">// 数据库</span><br>PoolSize: <span class="hljs-number">20</span>, <span class="hljs-comment">// 连接池大小</span><br>&#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="使用基本的go-redis指令"><a href="#使用基本的go-redis指令" class="headerlink" title="使用基本的go-redis指令"></a>使用基本的go-redis指令</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go">ctx, cancel := context.WithTimeout(context.Background(), time.Second)<br><span class="hljs-keyword">defer</span> cancel()<br><br>val, err := rdb.Get(ctx, <span class="hljs-string">&quot;key&quot;</span>).Result()<br>fmt.Println(val, err)<br><br>cmder := rdb.Get(ctx, <span class="hljs-string">&quot;key&quot;</span>)<br>val = cmder.Val()<br>err = cmder.Err()<br>fmt.Println(val, err)<br><br>err = rdb.Set(ctx, <span class="hljs-string">&quot;key1&quot;</span>, <span class="hljs-string">&quot;val1&quot;</span>, time.Hour).Err()<br><br>val = rdb.Get(ctx, <span class="hljs-string">&quot;key1&quot;</span>).Val()<br>fmt.Println(val, err)<br><br></code></pre></td></tr></table></figure><h3 id="go-redis中提供了redis-Nil-的错误来表示不存在的错误"><a href="#go-redis中提供了redis-Nil-的错误来表示不存在的错误" class="headerlink" title="go-redis中提供了redis.Nil 的错误来表示不存在的错误"></a>go-redis中提供了redis.Nil 的错误来表示不存在的错误</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go">rdb := redis.NewClient(&amp;redis.Options&#123;<br>Addr:     <span class="hljs-string">&quot;localhost:6379&quot;</span>,<br>Password: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">// 密码</span><br>DB:       <span class="hljs-number">0</span>,  <span class="hljs-comment">// 数据库</span><br>PoolSize: <span class="hljs-number">20</span>, <span class="hljs-comment">// 连接池大小</span><br>&#125;)<br>ctx, cancel := context.WithTimeout(context.Background(), time.Second)<br><span class="hljs-keyword">defer</span> cancel()<br><br>val, err := rdb.Get(ctx, <span class="hljs-string">&quot;key&quot;</span>).Result()<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">if</span> errors.Is(err, redis.Nil) &#123;<br>fmt.Printf(<span class="hljs-string">&quot;redis.Nil&quot;</span>)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Println(err)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Println(val, err)<br></code></pre></td></tr></table></figure><h3 id="使用-Client-Do-来实现任意redis指令"><a href="#使用-Client-Do-来实现任意redis指令" class="headerlink" title="使用 Client.Do 来实现任意redis指令"></a>使用 Client.Do 来实现任意redis指令</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs go">rdb := redis.NewClient(&amp;redis.Options&#123;<br>Addr:     <span class="hljs-string">&quot;localhost:6379&quot;</span>,<br>Password: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">// 密码</span><br>DB:       <span class="hljs-number">0</span>,  <span class="hljs-comment">// 数据库</span><br>PoolSize: <span class="hljs-number">20</span>, <span class="hljs-comment">// 连接池大小</span><br>&#125;)<br>ctx, cancel := context.WithTimeout(context.Background(), time.Second)<br><span class="hljs-keyword">defer</span> cancel()<br><br>err := rdb.Do(ctx, <span class="hljs-string">&quot;set&quot;</span>, <span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;val2&quot;</span>, <span class="hljs-string">&quot;EX&quot;</span>, <span class="hljs-number">3600</span>).Err()<br>fmt.Println(err)<br><br>val, err := rdb.Do(ctx, <span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;key2&quot;</span>).Result()<br>fmt.Println(val, err)<br></code></pre></td></tr></table></figure><h3 id="go-redis-ZSet-的使用"><a href="#go-redis-ZSet-的使用" class="headerlink" title="go-redis ZSet 的使用"></a>go-redis ZSet 的使用</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs go">rdb := redis.NewClient(&amp;redis.Options&#123;<br>Addr:     <span class="hljs-string">&quot;localhost:6379&quot;</span>,<br>Password: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">// 密码</span><br>DB:       <span class="hljs-number">0</span>,  <span class="hljs-comment">// 数据库</span><br>PoolSize: <span class="hljs-number">20</span>, <span class="hljs-comment">// 连接池大小</span><br>&#125;)<br>ctx, cancel := context.WithTimeout(context.Background(), time.Second)<br><span class="hljs-keyword">defer</span> cancel()<br><br>zsetKey := <span class="hljs-string">&quot;scores_rank&quot;</span><br><br>rank := []*redis.Z&#123;<br>&#123;Score: <span class="hljs-number">90.0</span>, Member: <span class="hljs-string">&quot;Alice&quot;</span>&#125;,<br>&#123;Score: <span class="hljs-number">90.1</span>, Member: <span class="hljs-string">&quot;Bob&quot;</span>&#125;,<br>&#123;Score: <span class="hljs-number">80.2</span>, Member: <span class="hljs-string">&quot;Cick&quot;</span>&#125;,<br>&#123;Score: <span class="hljs-number">89.2</span>, Member: <span class="hljs-string">&quot;David&quot;</span>&#125;,<br>&#123;Score: <span class="hljs-number">99.1</span>, Member: <span class="hljs-string">&quot;Eric&quot;</span>&#125;,<br>&#123;Score: <span class="hljs-number">78.1</span>, Member: <span class="hljs-string">&quot;Frank&quot;</span>&#125;,<br>&#125;<br><span class="hljs-keyword">if</span> err := rdb.ZAdd(ctx, zsetKey, rank...).Err(); err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;zadd failed&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Println(<span class="hljs-string">&quot;zadd success&quot;</span>)<br><br>newscore, err := rdb.ZIncrBy(ctx, zsetKey, <span class="hljs-number">-10</span>, <span class="hljs-string">&quot;Frank&quot;</span>).Result()<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;zincrby failed&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Printf(<span class="hljs-string">&quot;Frank&#x27;s score is %f\n&quot;</span>, newscore)<br><br>res := rdb.ZRevRangeWithScores(ctx, zsetKey, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>).Val()<br>fmt.Println(<span class="hljs-string">&quot;ZRevRangeWithScores&#x27;s res :&quot;</span>, res)<br><br><span class="hljs-keyword">for</span> _, z := <span class="hljs-keyword">range</span> res &#123;<br>fmt.Println(z)<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="Redis-Pipeline"><a href="#Redis-Pipeline" class="headerlink" title="Redis Pipeline"></a>Redis Pipeline</h3><ul><li><p>Pipeline  将发送的命令一次性打包发给Redis服务器执行，从而减少了RTT时延</p></li><li><p>Redis服务器会按照添加命令的顺序依次执行它们</p></li><li><p>Pipeline 不适合在这种情况下使用：单个命令可能需要等待前一个命令的结果，或者需要保证命令的顺序性</p></li></ul><h4 id="rdb-Pipeline"><a href="#rdb-Pipeline" class="headerlink" title="rdb.Pipeline()"></a>rdb.Pipeline()</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go">pipe := rdb.Pipeline()<br><br>incr := pipe.Incr(ctx, <span class="hljs-string">&quot;pipeline_counter&quot;</span>)<br>pipe.Expire(ctx, <span class="hljs-string">&quot;pipeline_counter&quot;</span>, time.Hour)<br>Get := pipe.Get(ctx, <span class="hljs-string">&quot;pipe_test1&quot;</span>)<br>_, err := pipe.Exec(ctx)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125;<br><br><span class="hljs-comment">// 在执行pipe.Exec之后才能获取到结果</span><br>fmt.Println(incr.Val())<br>fmt.Println(Get.Val())<br></code></pre></td></tr></table></figure><h4 id="rdb-Pipelined"><a href="#rdb-Pipelined" class="headerlink" title="rdb.Pipelined()"></a>rdb.Pipelined()</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//set</span><br>cmds, err := rdb.Pipelined(ctx, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(pipe redis.Pipeliner)</span></span> <span class="hljs-type">error</span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++ &#123;<br>pipe.Set(ctx, fmt.Sprintf(<span class="hljs-string">&quot;key%d&quot;</span>, i), fmt.Sprintf(<span class="hljs-string">&quot;key%d&quot;</span>, i), <span class="hljs-number">0</span>)<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125;<br><span class="hljs-comment">/*for _, cmd := range cmds &#123;</span><br><span class="hljs-comment">fmt.Println(cmd.(*redis.StringCmd).Val())</span><br><span class="hljs-comment">&#125;*/</span><br><span class="hljs-comment">//get</span><br>cmds, err = rdb.Pipelined(ctx, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(pipe redis.Pipeliner)</span></span> <span class="hljs-type">error</span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++ &#123;<br>pipe.Get(ctx, fmt.Sprintf(<span class="hljs-string">&quot;key%d&quot;</span>, i))<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125;<br><span class="hljs-keyword">for</span> _, cmd := <span class="hljs-keyword">range</span> cmds &#123;<br>fmt.Println(cmd.(*redis.StringCmd).Val())<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="go-redis-事务"><a href="#go-redis-事务" class="headerlink" title="go-redis 事务"></a>go-redis 事务</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//TxPipelineDemo</span><br>pipe := rdb.TxPipeline()<br>incr := pipe.Incr(ctx, <span class="hljs-string">&quot;tx_pipeline_counter&quot;</span>)<br>pipe.Expire(ctx, <span class="hljs-string">&quot;tx_pipeline_counter&quot;</span>, time.Hour)<br>_, err := pipe.Exec(ctx)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(err)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Println(incr.Val())<br><br><span class="hljs-comment">//TxPipelined demo TxPipelined 自动执行 Exec</span><br><span class="hljs-keyword">var</span> incr2 *redis.IntCmd<br>_, err = rdb.TxPipelined(ctx, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(pipe redis.Pipeliner)</span></span> <span class="hljs-type">error</span> &#123;<br>incr2 = pipe.Incr(ctx, <span class="hljs-string">&quot;tx_pipeline_counter&quot;</span>)<br>pipe.Expire(ctx, <span class="hljs-string">&quot;tx_pipeline_counter&quot;</span>, time.Hour)<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;)<br>fmt.Println(incr2.Val(), err)<br><span class="hljs-keyword">return</span><br></code></pre></td></tr></table></figure><p>等价指令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">MULTI<br>INCR pipeline_counter<br>EXPIRE pipeline_counts 3600<br>EXEC<br></code></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="http://www.redis.cn/commands.html">Redis命令中心（Redis commands） – Redis中国用户组（CRUG）</a></li><li><a href="https://pkg.go.dev/github.com/go-redis/redis">redis package - github.com&#x2F;go-redis&#x2F;redis - Go Packages</a></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>grpc初探</title>
    <link href="/2023/09/11/grpc%E5%88%9D%E6%8E%A2/"/>
    <url>/2023/09/11/grpc%E5%88%9D%E6%8E%A2/</url>
    
    <content type="html"><![CDATA[<h2 id="什么是rpc"><a href="#什么是rpc" class="headerlink" title="什么是rpc"></a>什么是rpc</h2><p>RPC（Remote Procedure Call，远程过程调用）是一种计算机编程模型和协议，允许一个程序在另一个地址空间（通常是远程计算机上）执行函数或过程调用，就像调用本地函数一样。RPC 的目标是使分布式系统中的不同组件能够相互通信和协作，而不必手动编写复杂的网络通信代码。(chatGPT解释)</p><h2 id="是什么grpc"><a href="#是什么grpc" class="headerlink" title="是什么grpc"></a>是什么grpc</h2><p>gRPC（gRPC Remote Procedure Call）是一种高性能、跨语言的远程过程调用（RPC）框架，由Google开发并开源。它建立在HTTP&#x2F;2协议上，使用Protocol Buffers（protobuf）作为接口定义语言（IDL），支持多种编程语言。gRPC的目标是使分布式系统之间的通信更加高效、可靠和易于扩展。(chatGPT解释)</p><h2 id="protoc文件简要了解"><a href="#protoc文件简要了解" class="headerlink" title="protoc文件简要了解"></a>protoc文件简要了解</h2><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs protobuf">syntax=<span class="hljs-string">&quot;proto3&quot;</span>; <span class="hljs-comment">//指定版本号</span><br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">SearchReqeust</span> &#123;<br><span class="hljs-type">string</span> KeyWord=<span class="hljs-number">1</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231004144526377.png" alt="image-20231004144526377"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231004151742178.png" alt="image-20231004151742178"></p><h2 id="Hello-world-Demo"><a href="#Hello-world-Demo" class="headerlink" title="Hello world  Demo"></a>Hello world  Demo</h2><h3 id="编写-proto文件"><a href="#编写-proto文件" class="headerlink" title="编写 proto文件"></a>编写 proto文件</h3><h4 id="Server端"><a href="#Server端" class="headerlink" title="Server端"></a>Server端</h4><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs protobuf">syntax = <span class="hljs-string">&quot;proto3&quot;</span>;<br><br><span class="hljs-keyword">option</span> go_package =<span class="hljs-string">&quot;server/pb&quot;</span>;<span class="hljs-comment">// 项目中import 导入生成的Go代码的名称 </span><br><br><span class="hljs-keyword">package</span> pb; <span class="hljs-comment">// proto文件模块</span><br><br><span class="hljs-keyword">service </span><span class="hljs-title class_">Greeter</span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">rpc</span> SayHello (HelloRequest) <span class="hljs-keyword">returns</span> (HelloResponse)</span>;<br>&#125;<br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">HelloRequest</span>&#123;<br>  <span class="hljs-type">string</span>  name =<span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">HelloResponse</span>&#123;<br>  <span class="hljs-type">string</span>  reply=<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Client-端"><a href="#Client-端" class="headerlink" title="Client 端"></a>Client 端</h4><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs protobuf">syntax = <span class="hljs-string">&quot;proto3&quot;</span>;<br><br><span class="hljs-keyword">option</span> go_package =<span class="hljs-string">&quot;client/pb&quot;</span>;<br><br><span class="hljs-keyword">package</span> pb;<br><br><span class="hljs-keyword">service </span><span class="hljs-title class_">Greeter</span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">rpc</span> SayHello (HelloRequest) <span class="hljs-keyword">returns</span> (HelloResponse)</span>;<br>&#125;<br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">HelloRequest</span>&#123;<br>  <span class="hljs-type">string</span>  name =<span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">HelloResponse</span>&#123;<br>  <span class="hljs-type">string</span>  reply=<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="执行-proto文件"><a href="#执行-proto文件" class="headerlink" title="执行 proto文件"></a>执行 proto文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">protoc --go_out=. --go_opt=paths=source_relative \<br>--go-grpc_out=. --go-grpc_opt=paths=source_relative \<br>pb/hello.proto<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">protoc --proto_path=pb --go_out=pb --go_opt=paths=source_relative \<br>--go-grpc_out=pb --go-grpc_opt=paths=source_relative \<br>hello.proto<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">protoc -I=pb --go_out=pb --go_opt=paths=source_relative \<br>--go-grpc_out=pb --go-grpc_opt=paths=source_relative \<br>hello.proto<br></code></pre></td></tr></table></figure><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--I=pb 指定protoc_path </span><br><span class="hljs-comment">--go_out 指定pb.go输出文件位置</span><br><span class="hljs-comment">--go-grpc_out 指定grpc代码的位置</span><br><br></code></pre></td></tr></table></figure><h3 id="编写-逻辑代码"><a href="#编写-逻辑代码" class="headerlink" title="编写 逻辑代码"></a>编写 逻辑代码</h3><h4 id="Server端-1"><a href="#Server端-1" class="headerlink" title="Server端"></a>Server端</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;context&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;microService_Learning/grpc_demo/server/pb&quot;</span><br><span class="hljs-string">&quot;net&quot;</span><br><br><span class="hljs-string">&quot;google.golang.org/grpc&quot;</span><br>)<br><br><span class="hljs-comment">// hello server</span><br><br><span class="hljs-keyword">type</span> server <span class="hljs-keyword">struct</span> &#123;<br>pb.UnimplementedGreeterServer<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *server)</span></span> SayHello(ctx context.Context, request *pb.HelloRequest) (*pb.HelloResponse, <span class="hljs-type">error</span>) &#123;<br><span class="hljs-keyword">return</span> &amp;pb.HelloResponse&#123;Reply: <span class="hljs-string">&quot;Hello&quot;</span> + request.Name&#125;, <span class="hljs-literal">nil</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>listener, err := net.Listen(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;:9091&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;net.Listen failed,err:%v\n&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br>s := grpc.NewServer()<br>pb.RegisterGreeterServer(s, &amp;server&#123;&#125;)<br><span class="hljs-keyword">if</span> err = s.Serve(listener); err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;s.Serve failed,err:%v\n&quot;</span>, err)<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="Client端"><a href="#Client端" class="headerlink" title="Client端"></a>Client端</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//server/main.go</span><br><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;context&quot;</span><br><span class="hljs-string">&quot;flag&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;microService_Learning/grpc_demo/server/pb&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br><br><span class="hljs-string">&quot;google.golang.org/grpc/credentials/insecure&quot;</span><br><br><span class="hljs-string">&quot;google.golang.org/grpc&quot;</span><br>)<br><br><span class="hljs-comment">// hello_client</span><br><br><span class="hljs-keyword">const</span> (<br>defaultName = <span class="hljs-string">&quot;world&quot;</span><br>)<br><br><span class="hljs-keyword">var</span> (<br><span class="hljs-comment">// 注意 flag.String 返回的是 *string</span><br>addr = flag.String(<span class="hljs-string">&quot;addr&quot;</span>, <span class="hljs-string">&quot;127.0.0.1:9092&quot;</span>, <span class="hljs-string">&quot;the address to connect to&quot;</span>)<br>name = flag.String(<span class="hljs-string">&quot;name&quot;</span>, defaultName, <span class="hljs-string">&quot;Name to greet&quot;</span>)<br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>flag.Parse()<br><span class="hljs-comment">// 连接到server端，此处禁用安全传输</span><br><span class="hljs-comment">//conn, err := grpc.Dial(*addr, grpc.WithInsecure())</span><br>conn, err := grpc.Dial(*addr, grpc.WithTransportCredentials(insecure.NewCredentials()))<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;grpc.Dail failed,err:%v\n&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br><span class="hljs-keyword">defer</span> conn.Close()<br><br><span class="hljs-comment">//执行rpc调用 并打印返回相应的值</span><br>client := pb.NewGreeterClient(conn)<br>ctx, cancel := context.WithTimeout(context.Background(), time.Millisecond*<span class="hljs-number">3</span>)<br><span class="hljs-keyword">defer</span> cancel()<br>r, err := client.SayHello(ctx, &amp;pb.HelloRequest&#123;Name: *name&#125;)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;counld not greet :%v\n&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br>log.Printf(<span class="hljs-string">&quot;Greeting :,%s&quot;</span>, r.GetReply())<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Add-Demo"><a href="#Add-Demo" class="headerlink" title="Add Demo"></a>Add Demo</h2><h3 id="server端-proto-文件"><a href="#server端-proto-文件" class="headerlink" title="server端  proto 文件"></a>server端  proto 文件</h3><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs protobuf"><span class="hljs-comment">//path: add_server/pb/add.proto</span><br>syntax=<span class="hljs-string">&quot;proto3&quot;</span>;<br><br><span class="hljs-keyword">package</span> add_sever;<br><br><span class="hljs-keyword">option</span> go_package =<span class="hljs-string">&quot;add_server/pb&quot;</span>;<br><br><span class="hljs-keyword">service </span><span class="hljs-title class_">Add</span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">rpc</span> CalcService(AddRequest) <span class="hljs-keyword">returns</span> (AddResponse)</span>;<br>&#125;<br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">AddRequest</span>&#123;<br>  <span class="hljs-type">int64</span> x=<span class="hljs-number">1</span>;<br>  <span class="hljs-type">int64</span> y=<span class="hljs-number">2</span>;<br>&#125;<br><br><span class="hljs-keyword">message  </span><span class="hljs-title class_">AddResponse</span>&#123;<br>  <span class="hljs-type">int64</span>  res=<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="server端具体逻辑代码"><a href="#server端具体逻辑代码" class="headerlink" title="server端具体逻辑代码"></a>server端具体逻辑代码</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// path: add_server/main.go</span><br><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;add_server/pb&quot;</span><br><span class="hljs-string">&quot;context&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><br><span class="hljs-string">&quot;net&quot;</span><br><br><span class="hljs-string">&quot;google.golang.org/grpc&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> server <span class="hljs-keyword">struct</span> &#123;<br>pb.UnimplementedAddServer<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *server)</span></span> CalcService(ctx context.Context, in *pb.AddRequest) (*pb.AddResponse, <span class="hljs-type">error</span>) &#123;<br>sum := <span class="hljs-type">int64</span>(in.GetX()) + <span class="hljs-type">int64</span>(in.GetY())<br><span class="hljs-keyword">return</span> &amp;pb.AddResponse&#123;Res: sum&#125;, <span class="hljs-literal">nil</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>listener, err := net.Listen(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;:3000&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;net.Listen failed,err:%v&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br>s := grpc.NewServer()<br>pb.RegisterAddServer(s, &amp;server&#123;&#125;)<br><span class="hljs-keyword">if</span> err = s.Serve(listener); err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;s.Serve failed,err:%v&quot;</span>, err)<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="client端-proto-文件"><a href="#client端-proto-文件" class="headerlink" title="client端  proto 文件"></a>client端  proto 文件</h3><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs protobuf"><span class="hljs-comment">// path: add_client/pb/add.proto</span><br>syntax=<span class="hljs-string">&quot;proto3&quot;</span>;<br><br><span class="hljs-keyword">package</span> add_sever;<br><br><span class="hljs-keyword">option</span> go_package =<span class="hljs-string">&quot;add_client/pb&quot;</span>;<br><br><span class="hljs-keyword">service </span><span class="hljs-title class_">Add</span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">rpc</span> CalcService(AddRequest) <span class="hljs-keyword">returns</span> (AddResponse)</span>;<br>&#125;<br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">AddRequest</span>&#123;<br>  <span class="hljs-type">int64</span> x=<span class="hljs-number">1</span>;<br>  <span class="hljs-type">int64</span> y=<span class="hljs-number">2</span>;<br>&#125;<br><br><span class="hljs-keyword">message  </span><span class="hljs-title class_">AddResponse</span>&#123;<br>  <span class="hljs-type">int64</span>  res=<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="client端具体逻辑代码"><a href="#client端具体逻辑代码" class="headerlink" title="client端具体逻辑代码"></a>client端具体逻辑代码</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// path: add_client/main.go</span><br><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;add_client/pb&quot;</span><br><span class="hljs-string">&quot;context&quot;</span><br><span class="hljs-string">&quot;flag&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br><br><span class="hljs-string">&quot;google.golang.org/grpc&quot;</span><br><span class="hljs-string">&quot;google.golang.org/grpc/credentials/insecure&quot;</span><br>)<br><br><span class="hljs-keyword">var</span> (<br>x = flag.Int(<span class="hljs-string">&quot;x&quot;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;x的值&quot;</span>)<br>y = flag.Int(<span class="hljs-string">&quot;y&quot;</span>, <span class="hljs-number">110</span>, <span class="hljs-string">&quot;x的值&quot;</span>)<br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>flag.Parse()<br><span class="hljs-comment">//建立连接</span><br>conn, err := grpc.Dial(<span class="hljs-string">&quot;127.0.0.1:3000&quot;</span>, grpc.WithTransportCredentials(insecure.NewCredentials()))<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;grpc.Dial failed,err:%v&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br><span class="hljs-keyword">defer</span> conn.Close()<br><br><span class="hljs-comment">//创建 rpc client端</span><br>client := pb.NewAddClient(conn)<br>ctx, cacel := context.WithTimeout(context.Background(), time.Second)<br><span class="hljs-keyword">defer</span> cacel()<br>resp, err := client.CalcService(ctx, &amp;pb.AddRequest&#123;<br>X: <span class="hljs-type">int64</span>(*x),<br>Y: <span class="hljs-type">int64</span>(*y),<br>&#125;)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;client.CalcService failed,err:%v&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br>log.Printf(<span class="hljs-string">&quot;res:%v&quot;</span>, resp.GetRes())<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>参考</strong></p><ul><li><a href="https://www.liwenzhou.com/posts/Go/gRPC/#autoid-0-3-4">gRPC教程 | 李文周的博客 (liwenzhou.com)</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>grpc</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Golang 学习路线总结】</title>
    <link href="/2023/09/09/%E3%80%90Golang-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF%E6%80%BB%E7%BB%93%E3%80%91/"/>
    <url>/2023/09/09/%E3%80%90Golang-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF%E6%80%BB%E7%BB%93%E3%80%91/</url>
    
    <content type="html"><![CDATA[<ul><li>Golang设计模式 <a href="https://www.bilibili.com/video/BV1Eg411m7rV/?spm_id_from=333.999.0.0&vd_source=7e55f4c87cf718e9cce051dc48d89bb7">Easy搞定Golang设计模式(Go语言设计模式，如此简单)_哔哩哔哩_bilibili</a></li><li>B+树 <a href="https://www.bilibili.com/video/BV1kT411N7it/?spm_id_from=333.999.0.0&vd_source=7e55f4c87cf718e9cce051dc48d89bb7">B+树,B-link树,LSM树…一个视频带你了解常用存储引擎数据结构（中）_哔哩哔哩_bilibili</a></li><li>TCP IP 八股 <a href="https://www.bilibili.com/video/BV1Mp4y1x7eX/?spm_id_from=pageDriver&vd_source=7e55f4c87cf718e9cce051dc48d89bb7">tcp&#x2F;ip协议第10讲：tcp四次挥手以及wireshark抓包验证_哔哩哔哩_bilibili</a></li><li>Kubernetes <a href="https://www.bilibili.com/video/BV1MT411x7GH/?spm_id_from=333.999.0.0&vd_source=7e55f4c87cf718e9cce051dc48d89bb7">完整版Kubernetes（K8S）全套入门+微服务实战项目，带你一站式深入掌握K8S核心能力_哔哩哔哩_bilibili</a></li><li>开发效率提升神器 <strong>air</strong> <a href="https://github.com/cosmtrek/air/tree/master">cosmtrek&#x2F;air: ☁️ Live reload for Go apps (github.com)</a></li><li><a href="https://www.yuque.com/aceld/lfhu8y/rg6nsf">Easy搞定Golang设计模式 (yuque.com)</a></li><li><a href="https://www.bookstack.cn/read/GoExpertProgramming/chapter01-1.1-chan.md">常见数据结构实现原理 GO专家编程》</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>总结</category>
      
      <category>golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>-学习路线记录</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>傻蛋速成python</title>
    <link href="/2023/09/07/%E5%82%BB%E8%9B%8B%E9%80%9F%E6%88%90python/"/>
    <url>/2023/09/07/%E5%82%BB%E8%9B%8B%E9%80%9F%E6%88%90python/</url>
    
    <content type="html"><![CDATA[<p>格式化 </p><ul><li></li></ul><p>%</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">str</span>=<span class="hljs-string">&quot;%s is %d years old&quot;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">str</span> % (<span class="hljs-string">&quot;yst&quot;</span>,<span class="hljs-number">123</span>)<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-string">&#x27;yst is 123 years old&#x27;</span><br></code></pre></td></tr></table></figure><p>format</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#123;:d&#125; + &#123;:d&#125; =&#123;:d&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">1</span>,<span class="hljs-number">21</span>,<span class="hljs-number">1</span>+<span class="hljs-number">21</span>)<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&#x27;&#123;1:d&#125; + &#123;0:d&#125; =&#123;2:d&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">1</span>,<span class="hljs-number">21</span>,<span class="hljs-number">1</span>+<span class="hljs-number">21</span>)<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&#x27;&#123;0:d&#125; + &#123;0:d&#125; + &#123;1:d&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">1</span>,<span class="hljs-number">21</span>)<br></code></pre></td></tr></table></figure><p>f</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">f `&#123;name&#125; <span class="hljs-keyword">is</span> &#123;age&#125; years old`<br></code></pre></td></tr></table></figure><p>结构控制 </p><p>for语句</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py">scores=[<span class="hljs-number">90</span>,<span class="hljs-number">45</span>,<span class="hljs-number">85</span>,<span class="hljs-number">76</span>,<span class="hljs-number">89</span>]<br><br><span class="hljs-keyword">for</span> score <span class="hljs-keyword">in</span> scores:<br>    <span class="hljs-keyword">if</span> score &gt;=<span class="hljs-number">60</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;PASS&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Failed&quot;</span>)       <br></code></pre></td></tr></table></figure><p>in range</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-number">10</span>):<br>    <span class="hljs-built_in">print</span>(i)<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">scores=[<span class="hljs-number">90</span>,<span class="hljs-number">45</span>,<span class="hljs-number">85</span>,<span class="hljs-number">76</span>,<span class="hljs-number">89</span>]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-built_in">len</span>(scores)):<br>    <span class="hljs-built_in">print</span>(scores[i])<br><br></code></pre></td></tr></table></figure><p>in enumerate</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">scores = [<span class="hljs-number">90</span>, <span class="hljs-number">45</span>, <span class="hljs-number">85</span>, <span class="hljs-number">76</span>, <span class="hljs-number">89</span>, <span class="hljs-number">900</span>]<br><br><span class="hljs-keyword">for</span> i, score <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(scores, <span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">print</span>(i, score)<br><br><br></code></pre></td></tr></table></figure><p>in zip</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">scores = [<span class="hljs-number">90</span>, <span class="hljs-number">45</span>, <span class="hljs-number">85</span>, <span class="hljs-number">76</span>, <span class="hljs-number">89</span>, <span class="hljs-number">900</span>]<br>names = [<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>, <span class="hljs-string">&quot;D&quot;</span>, <span class="hljs-string">&quot;E&quot;</span>, <span class="hljs-string">&quot;F&quot;</span>, <span class="hljs-string">&quot;G&quot;</span>]<br><br><span class="hljs-keyword">for</span> name, score <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(names, scores):<br>    <span class="hljs-built_in">print</span>(name, score)<br><br></code></pre></td></tr></table></figure><h2 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h2><p>hash仅支持 immutable的对象 str &#x2F;int &#x2F;bool&#x2F;float&#x2F;tuple</p><h2 id="func"><a href="#func" class="headerlink" title="func"></a>func</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">foobar</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;this is a python func&quot;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name=<span class="hljs-string">&quot;Alice&quot;</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;this is a comment&quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;hello <span class="hljs-subst">&#123;name&#125;</span>&#x27;</span>)<br><br><br>foobar()<br>greet()<br>greet(<span class="hljs-string">&quot;name&quot;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):<br>    res = x + y<br>    <span class="hljs-keyword">return</span> res<br><br><br>sum_res = add(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>)<br></code></pre></td></tr></table></figure><p>闭包 函数作为返回值</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># 函数的闭包</span><br><span class="hljs-comment"># 一个函数A中定义了函数B，并且另函数B调用了函数A的参数，且返回函数B作为返回值</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f2</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">f3</span>(<span class="hljs-params">y</span>):<br>        <span class="hljs-keyword">return</span> x + y<br><br>    <span class="hljs-keyword">return</span> f3<br><br><span class="hljs-built_in">print</span>(f2(<span class="hljs-number">1</span>)(<span class="hljs-number">2</span>))<br><br></code></pre></td></tr></table></figure><p>lambda表达式</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">3</span> * x ** <span class="hljs-number">2</span> + <span class="hljs-number">9</span> * x + <span class="hljs-number">10</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">diff</span>(<span class="hljs-params">x, func</span>):<br>    delta = <span class="hljs-number">1e-6</span><br>    <span class="hljs-keyword">return</span> (func(x + delta) - func(x)) / delta<br><br><br><span class="hljs-built_in">print</span>(diff(<span class="hljs-number">2</span>, f))<br><br><span class="hljs-built_in">print</span>(diff(<span class="hljs-number">1</span>, <span class="hljs-keyword">lambda</span> x: <span class="hljs-number">2</span> * x ** <span class="hljs-number">3</span> + <span class="hljs-number">9</span> * x + <span class="hljs-number">9</span>))<br><br></code></pre></td></tr></table></figure><p><code>Chatgpt对于 python中函数是一等公民的解释</code></p><p>在编程语言中，”一等公民”（First-Class Citizen）是一个概念，用来描述对某种特性（通常是数据类型）的支持程度。如果一种编程语言将某个特性视为一等公民，那么该特性就会享有与其他标准数据类型相同的权利和特性。在Python中，函数被视为一等公民，这意味着函数在语言中具有特殊的地位和权利：</p><p>以下是Python中函数被称为一等公民的原因和表现：</p><ol><li><p><strong>可以赋值给变量</strong>：您可以将函数赋值给变量，然后通过该变量调用函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Hello, <span class="hljs-subst">&#123;name&#125;</span>!&quot;</span>)<br><br>my_function = greet  <span class="hljs-comment"># 将函数赋值给变量</span><br>my_function(<span class="hljs-string">&quot;Alice&quot;</span>)  <span class="hljs-comment"># 通过变量调用函数</span><br></code></pre></td></tr></table></figure></li><li><p><strong>可以作为参数传递</strong>：您可以将函数作为参数传递给其他函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">apply</span>(<span class="hljs-params">func, x</span>):<br>    <span class="hljs-keyword">return</span> func(x)<br><br>result = apply(square, <span class="hljs-number">5</span>)  <span class="hljs-comment"># 将函数 square 作为参数传递给 apply 函数</span><br></code></pre></td></tr></table></figure><p>在上述示例中，<code>apply</code> 函数接受一个函数作为参数，然后将该函数应用于给定的参数 <code>x</code>。</p></li><li><p><strong>可以作为返回值</strong>：您可以从一个函数中返回另一个函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">multiplier</span>(<span class="hljs-params">factor</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">x</span>):<br>        <span class="hljs-keyword">return</span> x * factor<br>    <span class="hljs-keyword">return</span> multiply<br><br>double = multiplier(<span class="hljs-number">2</span>)  <span class="hljs-comment"># 返回一个函数</span><br>result = double(<span class="hljs-number">5</span>)  <span class="hljs-comment"># 调用返回的函数</span><br></code></pre></td></tr></table></figure><p>在上述示例中，<code>multiplier</code> 函数返回了另一个函数 <code>multiply</code>，并且可以通过 <code>double</code> 变量来调用返回的函数。</p></li><li><p><strong>可以存储在数据结构中</strong>：函数可以存储在列表、字典或其他数据结构中，以便在后续使用。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">functions = [square, cube, add]<br>result = functions[<span class="hljs-number">0</span>](<span class="hljs-number">3</span>)  <span class="hljs-comment"># 从列表中获取函数并调用它</span><br></code></pre></td></tr></table></figure><p>上述示例中，<code>functions</code> 列表存储了不同的函数，可以根据需要选择并调用其中的一个。</p></li></ol><p>因此，Python中的函数被称为一等公民，因为它们具有与其他数据类型（如整数、字符串和列表）相同的权利和特性。这种特性使得Python非常适合于函数式编程范式，并允许编写更灵活和可复用的代码。函数作为一等公民的特性在编写高阶函数和实现回调机制等编程任务时非常有用。</p><h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><h3 id=""><a href="#" class="headerlink" title=""></a></h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># 交换两个元素的值</span><br>x, y = <span class="hljs-number">30</span>, <span class="hljs-number">50</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;x=%d,y=%d&#x27;</span> % (x, y))<br>t = x<br>x = y<br>y = x<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;x=%d,y=%d&quot;</span> % (x, y))<br><br>x, y = <span class="hljs-number">30</span>, <span class="hljs-number">50</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;x=%d,y=%d&quot;</span> % (x, y))<br>x, y = y, x<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;x=%d y=%d&quot;</span> % (x, y))<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">a, b, c, x = <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1.414</span><br>res = a * x ** <span class="hljs-number">3</span> + b * x ** <span class="hljs-number">2</span> + c<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;多项式的值为:<span class="hljs-subst">&#123;res:<span class="hljs-number">.2</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sympy <span class="hljs-keyword">as</span> sp<br><br>x = sp.symbols(<span class="hljs-string">&#x27;x&#x27;</span>)<br><br>f = <span class="hljs-number">5</span> * x ** <span class="hljs-number">2</span> - <span class="hljs-number">4</span> * x - <span class="hljs-number">1</span><br><br>solution = sp.solve((f, x))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;方程的解为:<span class="hljs-subst">&#123;solution&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">a, b, c, x, y, z = <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1.414</span>, <span class="hljs-number">1.732</span>, <span class="hljs-number">2.712</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;a=<span class="hljs-subst">&#123;a:&lt;<span class="hljs-number">7</span>&#125;</span> b=<span class="hljs-subst">&#123;b:&lt;<span class="hljs-number">7</span>&#125;</span> c=<span class="hljs-subst">&#123;c:&lt;<span class="hljs-number">7</span>&#125;</span>&quot;</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;x=<span class="hljs-subst">&#123;x:&lt;<span class="hljs-number">7.3</span>f&#125;</span> y=<span class="hljs-subst">&#123;y:&lt;<span class="hljs-number">7.3</span>f&#125;</span> z=<span class="hljs-subst">&#123;z:&lt;<span class="hljs-number">7.3</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py">num = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入一个三位的正整数&quot;</span>))<br><br>gewei = num % <span class="hljs-number">10</span><br>shiwei = (num // <span class="hljs-number">10</span>) % <span class="hljs-number">10</span><br>baiwei = num // <span class="hljs-number">100</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;百位数字:<span class="hljs-subst">&#123;baiwei&#125;</span>&quot;</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;十位数字<span class="hljs-subst">&#123;shiwei&#125;</span>&quot;</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;个位数字<span class="hljs-subst">&#123;gewei&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">c = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入设施温度&quot;</span>))<br><br>f = (<span class="hljs-number">9</span> / <span class="hljs-number">5</span>) * c + <span class="hljs-number">32</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;华氏温度为:<span class="hljs-subst">&#123;f:<span class="hljs-number">.1</span>f&#125;</span>度&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py">result = math.exp(<span class="hljs-number">3.14</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;e 的3.14次方的结果是<span class="hljs-subst">&#123;result:<span class="hljs-number">.5</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># 输入三角形的三条边长</span><br>a = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入第一条边的长度：&quot;</span>))<br>b = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入第二条边的长度：&quot;</span>))<br>c = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入第三条边的长度：&quot;</span>))<br><br><span class="hljs-comment"># 计算三角形的半周长</span><br>s = (a + b + c) / <span class="hljs-number">2</span><br><br><span class="hljs-comment"># 计算三角形的面积</span><br>area = math.sqrt(s * (s - a) * (s - b) * (s - c))<br><br><span class="hljs-comment"># 打印结果</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;三角形的面积是：<span class="hljs-subst">&#123;area:<span class="hljs-number">.2</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">radius = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入球的半径:&quot;</span>))<br><br>volume = (<span class="hljs-number">4</span> / <span class="hljs-number">3</span>) * math.pi * radius ** <span class="hljs-number">3</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;球的体积是:<span class="hljs-subst">&#123;volume:<span class="hljs-number">.1</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">v1 = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;第一个数字&quot;</span>))<br><br>v2 = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;第二个数字&quot;</span>))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;平均值:<span class="hljs-subst">&#123;(v1 + v2) / <span class="hljs-number">2</span>:<span class="hljs-number">.2</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py">r = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;圆柱形的半径&quot;</span>))<br><br>h = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;圆柱体的高&quot;</span>))<br><br>res1 = <span class="hljs-number">2</span> * math.pi * (r ** <span class="hljs-number">2</span>) + <span class="hljs-number">2</span> * math.pi * r * h<br><br>res2 = math.pi * (r ** <span class="hljs-number">2</span>) * h<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;圆柱体的表面积:<span class="hljs-subst">&#123;res1:<span class="hljs-number">.2</span>f&#125;</span>&quot;</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;圆柱体的体积:<span class="hljs-subst">&#123;res2:<span class="hljs-number">.2</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python3</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker的基本使用</title>
    <link href="/2023/09/06/docker%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/09/06/docker%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> golang:alpine<br><br><span class="hljs-comment"># Set necessary environmet variables needed for our image</span><br><span class="hljs-keyword">ENV</span> GO111MODULE=on \<br>    CGO_ENABLED=<span class="hljs-number">0</span> \<br>    GOOS=linux \<br>    GOARCH=amd64<br><br><span class="hljs-comment"># Move to working directory /build</span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /build</span><br><br><span class="hljs-comment"># Copy and download dependency using go mod</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> go.mod .</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> go.sum .</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> go mod download</span><br><br><span class="hljs-comment"># Copy the code into the container</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> . .</span><br><br><span class="hljs-comment"># Build the application</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> go build -o main .</span><br><br><span class="hljs-comment"># Move to /dist directory as the place for resulting binary folder</span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /dist</span><br><br><span class="hljs-comment"># Copy binary from build to main folder</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">cp</span> /build/main .</span><br><br><span class="hljs-comment"># Export necessary port</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">3000</span><br><br><span class="hljs-comment"># Command to run when starting the container</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;/dist/main&quot;</span>]</span><br></code></pre></td></tr></table></figure><p>docker build . -t go-dock</p><p>docker run -p 3000:3000 go-dock</p><p>左边的 3000 是主机（你的计算机）上的端口号。<br>       右边的 3000 是Docker容器内部的端口号。</p><p>​</p><p>go mod tidy</p><p>go mod init [mod-name]</p>]]></content>
    
    
    <categories>
      
      <category>docker</category>
      
      <category>golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>shell编程</title>
    <link href="/2023/09/02/shell%E7%BC%96%E7%A8%8B/"/>
    <url>/2023/09/02/shell%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p> <code>#!/bin/bash</code>。这是一个典型的Bash脚本的开头，指定了脚本要使用的解释器，即Bash。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># Author : Forrest</span><br><br><span class="hljs-built_in">pwd</span><br><span class="hljs-built_in">ls</span><br><span class="hljs-built_in">mkdir</span> testDir<br><br></code></pre></td></tr></table></figure><p><strong>添加执行权限</strong> </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> +x filename<br></code></pre></td></tr></table></figure><p>用read命令来获取keyboard的输入，并将输入结果赋值给变量 The following script uses the <strong>read</strong> command which takes the input from the keyboard and assigns it as the value of the variable PERSON and finally prints it on STDOUT.</p><p>用$符号来获取变量的值 To access the value stored in a variable, prefix its name with the dollar sign (<strong>$</strong>)</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># Author : Forrest</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;what is your name&quot;</span><br><span class="hljs-built_in">read</span> name<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello ,<span class="hljs-variable">$name</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;done&quot;</span><br></code></pre></td></tr></table></figure><h2 id="Using-Variables"><a href="#Using-Variables" class="headerlink" title="Using Variables"></a>Using Variables</h2><h4 id="Defining-Variables"><a href="#Defining-Variables" class="headerlink" title="Defining  Variables"></a>Defining  Variables</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">variable_name=variable_value<br><br>NAME=<span class="hljs-string">&quot;Forrest&quot;</span><br>NUMBER=123<br></code></pre></td></tr></table></figure><h4 id="Accessing-values"><a href="#Accessing-values" class="headerlink" title="Accessing values"></a>Accessing values</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">NAME=<span class="hljs-string">&quot;Forrest&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$NAME</span><br></code></pre></td></tr></table></figure><h4 id="Read-only-Variables"><a href="#Read-only-Variables" class="headerlink" title="Read-only Variables"></a>Read-only Variables</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">NAME=<span class="hljs-string">&quot;Forrest&quot;</span><br><span class="hljs-built_in">readonly</span> NAME<br>NAME=<span class="hljs-string">&quot;another name&quot;</span><br></code></pre></td></tr></table></figure><p>err: </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">-bash: NAME: <span class="hljs-built_in">readonly</span> variable<br></code></pre></td></tr></table></figure><p><code>readonly</code> 变量的只读属性是永久性的，不能在脚本中或shell会话中被修改或取消。Unsetting Variables</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">unset</span> vaiable_name<br></code></pre></td></tr></table></figure><p>Special Variables </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;what is your name&quot;</span><br><span class="hljs-built_in">read</span> name<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello ,<span class="hljs-variable">$name</span>&quot;</span><br><span class="hljs-comment"># special variable</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;current script pid: $$&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;filename : <span class="hljs-variable">$0</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;first parameter: <span class="hljs-variable">$1</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;second parameter :<span class="hljs-variable">$2</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;quoted values <span class="hljs-variable">$@</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;quoted values $*&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;total number of quoted  <span class="hljs-variable">$#</span>&quot;</span><br><br><span class="hljs-keyword">for</span> TOKEN <span class="hljs-keyword">in</span> $*<br><span class="hljs-keyword">do</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-variable">$TOKEN</span><br><span class="hljs-keyword">done</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;exit status $?&quot;</span><br></code></pre></td></tr></table></figure><h2 id="Using-Shell-Arrays"><a href="#Using-Shell-Arrays" class="headerlink" title="Using Shell Arrays"></a>Using Shell Arrays</h2><p>查看shell是 ksh 还是bash</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$SHELL</span><br></code></pre></td></tr></table></figure><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20230830201146754.png" alt="image-20230830201146754"></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash</span><br><br>Arr[0]=<span class="hljs-string">&quot;0&quot;</span><br>Arr[1]=<span class="hljs-string">&quot;1&quot;</span><br>Arr[2]=<span class="hljs-string">&quot;2&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;first item <span class="hljs-variable">$&#123;Arr[0]&#125;</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;first method <span class="hljs-variable">$&#123;Arr[*]&#125;</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;second method <span class="hljs-variable">$&#123;Arr[@]&#125;</span>&quot;</span><br></code></pre></td></tr></table></figure><h2 id="Decision-Making"><a href="#Decision-Making" class="headerlink" title="Decision Making"></a>Decision Making</h2><h3 id="if-else"><a href="#if-else" class="headerlink" title="if else"></a>if else</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">a=10<br>b=20<br><span class="hljs-keyword">if</span> [<span class="hljs-variable">$a</span>==<span class="hljs-variable">$b</span>]<br><span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a equlas b&quot;</span><br><span class="hljs-keyword">else</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a not equals b&quot;</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><h3 id="if-elseif"><a href="#if-elseif" class="headerlink" title="if elseif"></a>if elseif</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash</span><br><br>a=10<br>b=20<br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$a</span> == <span class="hljs-variable">$b</span> ]<br><span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a equals b&quot;</span><br><span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$a</span> -gt <span class="hljs-variable">$b</span> ]<br><span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a is greater than b&quot;</span><br><span class="hljs-keyword">elif</span>  [ <span class="hljs-variable">$a</span> -lt <span class="hljs-variable">$b</span> ]<br><span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a is less than b&quot;</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p>​</p><h3 id="case-esac"><a href="#case-esac" class="headerlink" title="case .. esac"></a>case .. esac</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash</span><br><br>option=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1&#125;</span>&quot;</span><br><br><span class="hljs-keyword">case</span> <span class="hljs-variable">$&#123;option&#125;</span> <span class="hljs-keyword">in</span><br>        -f) FILE=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;2&#125;</span>&quot;</span><br>                        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;File name is <span class="hljs-variable">$FILE</span>&quot;</span><br>                        ;;<br>        -d) DIR=<span class="hljs-variable">$&#123;2&#125;</span><br>                        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Dir name is <span class="hljs-variable">$DIR</span>&quot;</span><br>                        ;;<br>        *)<br>                <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;`basename <span class="hljs-variable">$&#123;0&#125;</span> `:usage :[-f file] | [-d directory]&quot;</span><br>                <span class="hljs-built_in">exit</span> 1<br>                ;;<br><span class="hljs-keyword">esac</span><br></code></pre></td></tr></table></figure><h2 id="IO-Redirection"><a href="#IO-Redirection" class="headerlink" title="IO Redirection"></a>IO Redirection</h2><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p><strong>who</strong> command which redirects the complete output of the command in the users file.</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">who</span> &gt; <span class="hljs-built_in">users</span><br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">echo</span> line 1 &gt;  <span class="hljs-built_in">users</span><br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">echo</span> line 2 &gt;&gt; uses<br></code></pre></td></tr></table></figure><h2 id="eval"><a href="#eval" class="headerlink" title="eval"></a><strong>eval</strong></h2><p><code>eval</code> 是一个在Shell脚本中用于执行字符串作为命令的特殊命令。它会将传递给它的字符串作为Shell命令进行解释和执行。<code>eval</code> 常用于动态生成和执行命令，可以将字符串中的变量、表达式和命令进行求值和执行。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">x=5<br>y=3<br>operation=<span class="hljs-string">&quot;x+y&quot;</span><br>result=$(<span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;echo \$(( <span class="hljs-variable">$operation</span> ))&quot;</span>)<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Result: <span class="hljs-variable">$result</span>&quot;</span><br><br></code></pre></td></tr></table></figure><h2 id="使用多行注释"><a href="#使用多行注释" class="headerlink" title="使用多行注释"></a>使用多行注释</h2><p>你可以使用 <code>:&lt;&lt;COMMENT</code> 和 <code>COMMENT</code> 来实现多行注释。例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">bashCopy code:&lt;&lt;<span class="hljs-string">COMMENT</span><br><span class="hljs-string">这是多行注释的内容。</span><br><span class="hljs-string">可以有多行。</span><br><span class="hljs-string">这里可以写注释。</span><br><span class="hljs-string">COMMENT</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;这是实际的代码。&quot;</span><br></code></pre></td></tr></table></figure><p>在上面的示例中，冒号 <code>:</code> 后面的 <code>&lt;&lt;COMMENT</code> 表示将会读取从 <code>COMMENT</code> 开始的多行文本，这部分文本会被当作注释而被忽略。当Shell执行脚本时，它会跳过这些注释内容。</p><h2 id="权限问题"><a href="#权限问题" class="headerlink" title="权限问题"></a>权限问题</h2><h3 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h3><p><strong>parameter :  + - &#x3D;</strong></p><p>+表示全局（User group other）添加某些权限</p><p>-表示全局（User Group Other） 删除某些权限</p><p>&#x3D;表示设置（User | Group | Other）的权限是什么</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">chmod</span> o+wx testfile<br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">chmod</span> 743 testfile<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2023/08/01/hello-world/"/>
    <url>/2023/08/01/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
